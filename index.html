<!-- [Keep ALL your existing HTML exactly as you provided it] -->
<!-- Only replace the ENTIRE <script> tag with this updated version: -->

<script>
        // Translations object (expanded with Spanish, French, German)
        const translations = {
            en: {
                darkModeButton: 'ЁЯМЩ Dark Mode',
                lightModeButton: 'тШАя╕П Light Mode',
                tagline: 'Smart SEO. More Views. Less Hassle.',
                videoTopicLabel: 'ЁЯУЭ Video Topic/Script',
                videoTopicPlaceholder: 'e.g. A story about a lion who learns humility...',
                contentLanguageLabel: 'ЁЯМН Content Language',
                englishOption: 'English',
                hindiOption: 'Hindi',
                urduOption: 'Urdu',
                russianOption: 'Russian',
                spanishOption: 'Espa├▒ol',
                frenchOption: 'Fran├зais',
                germanOption: 'Deutsch',
                videoFormatLabel: 'ЁЯОм Video Format',
                shortVideoOption: 'Short Video',
                longVideoOption: 'Long Video',
                generateSEOButton: 'тЪб Generate SEO',
                resetButton: 'ЁЯФБ Reset',
                exportButton: 'ЁЯУе Export All',
                titleLabel: 'ЁЯОп Title',
                titlePlaceholder: 'Your optimized title will appear here...',
                copyTitleButton: 'Copy Title',
                descriptionLabel: 'ЁЯУЭ Description',
                descriptionPlaceholder: 'Your SEO description will appear here...',
                hashtagsLabel: 'ЁЯУМ Hashtags',
                hashtagsPlaceholder: 'Relevant hashtags will appear here...',
                videoTagsLabel: 'ЁЯФЦ Video Tags',
                videoTagsPlaceholder: 'Optimized tags will appear here...',
                copyTagsButton: 'Copy Tags',
                copyHashtagsButton: 'Copy Hashtags',
                footerText: 'Powered by <strong>YTSEO.ai</strong> тАУ Built with тЭдя╕П for global creators',
                alertEnterTopic: 'Please enter a video topic first!',
                alertGenerateContent: 'Generate some content first!',
                copiedSuccess: 'тЬУ Copied!',
                generatingText: 'Generating...'
            },
            hi: {
                darkModeButton: 'ЁЯМЩ рдбрд╛рд░реНрдХ рдореЛрдб',
                lightModeButton: 'тШАя╕П рд▓рд╛рдЗрдЯ рдореЛрдб',
                tagline: 'рд╕реНрдорд╛рд░реНрдЯ рдПрд╕рдИрдУред рдЕрдзрд┐рдХ рд╡реНрдпреВрдЬред рдХрдо рдкрд░реЗрд╢рд╛рдиреАред',
                videoTopicLabel: 'ЁЯУЭ рд╡реАрдбрд┐рдпреЛ рд╡рд┐рд╖рдп/рд╕реНрдХреНрд░рд┐рдкреНрдЯ',
                videoTopicPlaceholder: 'рдЙрджрд╛. рдПрдХ рд╢реЗрд░ рдХреА рдХрд╣рд╛рдиреА рдЬреЛ рд╡рд┐рдирдореНрд░рддрд╛ рд╕реАрдЦрддрд╛ рд╣реИ...',
                contentLanguageLabel: 'ЁЯМН рд╕рд╛рдордЧреНрд░реА рднрд╛рд╖рд╛',
                englishOption: 'рдЕрдВрдЧреНрд░реЗрдЬреА',
                hindiOption: 'рд╣рд┐рдиреНрджреА',
                urduOption: '╪з╪▒╪преВ',
                russianOption: 'рд░реВрд╕реА',
                spanishOption: 'рд╕реНрдкреЗрдирд┐рд╢',
                frenchOption: 'рдлреНрд░реЗрдВрдЪ',
                germanOption: 'рдЬрд░реНрдорди',
                videoFormatLabel: 'ЁЯОм рд╡реАрдбрд┐рдпреЛ рдкреНрд░рд╛рд░реВрдк',
                shortVideoOption: 'рдЫреЛрдЯрд╛ рд╡реАрдбрд┐рдпреЛ',
                longVideoOption: 'рд▓рдВрдмрд╛ рд╡реАрдбрд┐рдпреЛ',
                generateSEOButton: 'тЪб рдПрд╕рдИрдУ рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ',
                copyTitleButton: 'рд╢реАрд░реНрд╖рдХ рдХреЙрдкреА рдХрд░реЗрдВ',
                resetButton: 'ЁЯФБ рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ',
                exportButton: 'ЁЯУе рд╕рднреА рдирд┐рд░реНрдпрд╛рдд рдХрд░реЗрдВ',
                titleLabel: 'ЁЯОп рд╢реАрд░реНрд╖рдХ',
                titlePlaceholder: 'рдЖрдкрдХрд╛ рдЕрдиреБрдХреВрд▓рд┐рдд рд╢реАрд░реНрд╖рдХ рдпрд╣рд╛рдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛...',
                descriptionLabel: 'ЁЯУЭ рд╡рд┐рд╡рд░рдг',
                descriptionPlaceholder: 'рдЖрдкрдХрд╛ рдПрд╕рдИрдУ рд╡рд┐рд╡рд░рдг рдпрд╣рд╛рдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛...',
                hashtagsLabel: 'ЁЯУМ рд╣реИрд╢рдЯреИрдЧ',
                hashtagsPlaceholder: 'рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИрд╢рдЯреИрдЧ рдпрд╣рд╛рдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ...',
                videoTagsLabel: 'ЁЯФЦ рд╡реАрдбрд┐рдпреЛ рдЯреИрдЧ',
                videoTagsPlaceholder: 'рдЕрдиреБрдХреВрд▓рд┐рдд рдЯреИрдЧ рдпрд╣рд╛рдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ...',
                copyTagsButton: 'рдЯреИрдЧ рдХреЙрдкреА рдХрд░реЗрдВ',
                copyHashtagsButton: 'рд╣реИрд╢рдЯреИрдЧ рдХреЙрдкреА рдХрд░реЗрдВ',
                footerText: '<strong>YTSEO.ai</strong> рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд тАУ рд╡реИрд╢реНрд╡рд┐рдХ рд░рдЪрдирд╛рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП тЭдя╕П рд╕реЗ рдирд┐рд░реНрдорд┐рдд',
                alertEnterTopic: 'рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рдПрдХ рд╡реАрдбрд┐рдпреЛ рд╡рд┐рд╖рдп рджрд░реНрдЬ рдХрд░реЗрдВ!',
                alertGenerateContent: 'рдкрд╣рд▓реЗ рдХреБрдЫ рд╕рд╛рдордЧреНрд░реА рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ!',
                copiedSuccess: 'тЬУ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЧрдпрд╛!',
                generatingText: 'рдЬрдирд░реЗрдЯ рд╣реЛ рд░рд╣рд╛ рд╣реИ...'
            },
            // [Keep all other language translations exactly as you had them]
            // ...
        };

        // [Keep ALL your existing functions EXCEPT generateSEO() and fetchSEOData()]
        // Only replace these two functions:

        async function fetchSEOData(contentLang = 'en') {
            try {
                const response = await fetch(`json/seo-${contentLang}.json`);
                if (!response.ok) throw new Error('Language not found');
                return await response.json();
            } catch (error) {
                console.warn(`Loading English fallback for ${contentLang}`);
                const enResponse = await fetch('json/seo-en.json');
                return await enResponse.json();
            }
        }

        async function generateSEO() {
            const topic = document.getElementById("inputTopic").value.trim();
            const contentLang = document.getElementById("language").value;
            const isShort = document.getElementById("type").value === "shorts";
            const type = isShort ? "shorts" : "long";
            const currentUILang = localStorage.getItem('ytseoUILang') || 'en';

            if (!topic) {
                alert(translations[currentUILang].alertEnterTopic);
                return;
            }

            // Show loading state
            const generateBtn = document.querySelector('[onclick="generateSEO()"]');
            const originalBtnText = generateBtn.innerHTML;
            generateBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ${translations[currentUILang].generatingText}`;
            generateBtn.disabled = true;

            try {
                // Load templates
                const { seo_templates, fallback } = await fetchSEOData(contentLang);
                
                // Find best matching template
                const template = findBestTemplate(topic, seo_templates);
                const chosenTemplate = template || fallback;

                // Generate variables
                const variables = {
                    topic,
                    language: contentLang,
                    video_type: isShort ? "short video" : "long video",
                    ...(chosenTemplate.variables || {})
                };

                let titleTemplate = '';
                let descriptionTemplate = '';
                let tagsTemplate = '';

                if (chosenTemplate.templates) {
                    titleTemplate = chosenTemplate.templates.title[type];
                    descriptionTemplate = chosenTemplate.templates.description[type];
                    tagsTemplate = chosenTemplate.templates.tags.join(", ");
                } else {
                    titleTemplate = chosenTemplate.title;
                    descriptionTemplate = chosenTemplate.description;
                    tagsTemplate = Array.isArray(chosenTemplate.tags) ? 
                        chosenTemplate.tags.join(", ") : chosenTemplate.tags || ''; 
                }

                document.getElementById("titleBox").value = replacePlaceholders(titleTemplate, variables);
                document.getElementById("descBox").value = replacePlaceholders(descriptionTemplate, variables);
                
                const tagsRaw = replacePlaceholders(tagsTemplate, variables);
                document.getElementById("tagsBox").value = tagsRaw;
                document.getElementById("hashtagBox").value = tagsRaw.split(", ").map(t => `#${t.replace(/\s+/g, '')}`).join(" ");

            } catch (error) {
                console.error("Generation error:", error);
                alert(translations[currentUILang].alertGenerateContent);
            } finally {
                generateBtn.innerHTML = originalBtnText;
                generateBtn.disabled = false;
            }
        }

        // [Keep ALL your other existing functions exactly as they were]
        // findBestTemplate(), replacePlaceholders(), resetFields(), 
        // downloadTxt(), toggleDarkMode(), applyTranslations(), 
        // changeUILanguage(), copyToClipboard() all remain UNCHANGED

        // INITIALIZE ON LOAD - Keep this exactly as you had it
        document.addEventListener('DOMContentLoaded', async () => {
            // Apply UI language and dark mode first
            const savedLang = localStorage.getItem('ytseoUILang') || 'en';
            document.getElementById('uiLang').value = savedLang;
            applyTranslations(savedLang);

            if (localStorage.getItem('ytseoDarkMode') === 'true') {
                document.body.classList.add('dark');
                const btn = document.querySelector('[onclick="toggleDarkMode()"]');
                const currentLang = localStorage.getItem('ytseoUILang') || 'en';
                btn.innerHTML = `<i class="fas fa-sun"></i> ${translations[currentLang].lightModeButton}`;
            }
        });
    </script>
