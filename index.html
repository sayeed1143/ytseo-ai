<!DOCTYPE html>
<html lang="en">
<head>
    <!-- [Your existing head content remains exactly the same] -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTSEO.ai - Smart SEO for YouTube Videos</title>
    <meta name="description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta name="keywords" content="YouTube SEO, video optimization, title generator, description generator, tag generator, YouTube tools, AI SEO, content creator tools, content creation, video marketing, get more views, YouTube growth">
    <meta name="author" content="YTSEO.ai">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.ytseo.ai/">
    <meta property="og:title" content="YTSEO.ai - Smart SEO for YouTube Videos">
    <meta property="og:description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta property="og:image" content="https://www.ytseo.ai/og-image.jpg"> 
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.ytseo.ai/">
    <meta property="twitter:title" content="YTSEO.ai - Smart SEO for YouTube Videos">
    <meta property="twitter:description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta property="twitter:image" content="https://www.ytseo.ai/twitter-image.jpg"> 
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- [Your existing header/main/footer HTML remains exactly the same] -->
    <header>
        <div class="container">
            <h1>YTSEO.ai</h1>
            <p data-translate-key="tagline">Smart SEO. More Views. Less Hassle.</p>
            <div class="header-controls">
                <select id="uiLang" onchange="changeUILanguage()">
                    <option value="en" data-translate-key="englishOption">English</option>
                    <option value="hi" data-translate-key="hindiOption">Hindi</option>
                    <option value="ur" data-translate-key="urduOption">Urdu</option>
                    <option value="ru" data-translate-key="russianOption">Russian</option>
                    <option value="es" data-translate-key="spanishOption">Espa√±ol</option>
                    <option value="fr" data-translate-key="frenchOption">Fran√ßais</option>
                    <option value="de" data-translate-key="germanOption">Deutsch</option>
                </select>
                <button onclick="toggleDarkMode()" data-translate-key="darkModeButton">üåô Dark Mode</button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="input-section card">
            <div class="form-group">
                <label for="inputTopic" data-translate-key="videoTopicLabel"><i class="fas fa-pencil-alt"></i> Video Topic/Script</label>
                <textarea id="inputTopic" rows="4" placeholder="e.g. A story about a lion who learns humility..." data-translate-key="videoTopicPlaceholder"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="language" data-translate-key="contentLanguageLabel"><i class="fas fa-globe"></i> Content Language</label>
                    <select id="language">
                        <option value="en" data-translate-key="englishOption">English</option>
                        <option value="hi" data-translate-key="hindiOption">Hindi</option>
                        <option value="ur" data-translate-key="urduOption">Urdu</option>
                        <option value="ru" data-translate-key="russianOption">Russian</option>
                        <option value="es" data-translate-key="spanishOption">Espa√±ol</option>
                        <option value="fr" data-translate-key="frenchOption">Fran√ßais</option>
                        <option value="de" data-translate-key="germanOption">Deutsch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="type" data-translate-key="videoFormatLabel"><i class="fas fa-video"></i> Video Format</label>
                    <select id="type">
                        <option value="shorts" data-translate-key="shortVideoOption">Short Video</option>
                        <option value="long" data-translate-key="longVideoOption">Long Video</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="generateSEO()" data-translate-key="generateSEOButton"><i class="fas fa-bolt"></i> Generate SEO</button>
                <button class="btn btn-secondary" onclick="resetFields()" data-translate-key="resetButton"><i class="fas fa-redo-alt"></i> Reset</button>
            </div>
        </section>

        <section class="output-section card">
            <div class="output-group">
                <label for="titleBox" data-translate-key="titleLabel"><i class="fas fa-heading"></i> Title</label>
                <textarea id="titleBox" rows="2" placeholder="Your optimized title will appear here..." data-translate-key="titlePlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('titleBox')"><i class="fas fa-copy"></i> Copy Title</button>
            </div>

            <div class="output-group">
                <label for="descBox" data-translate-key="descriptionLabel"><i class="fas fa-align-left"></i> Description</label>
                <textarea id="descBox" rows="6" placeholder="Your SEO description will appear here..." data-translate-key="descriptionPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('descBox')"><i class="fas fa-copy"></i> Copy Description</button>
            </div>

            <div class="output-group">
                <label for="hashtagBox" data-translate-key="hashtagsLabel"><i class="fas fa-hashtag"></i> Hashtags</label>
                <textarea id="hashtagBox" rows="2" placeholder="Relevant hashtags will appear here..." data-translate-key="hashtagsPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('hashtagBox')"><i class="fas fa-copy"></i> Copy Hashtags</button>
            </div>

            <div class="output-group">
                <label for="tagsBox" data-translate-key="videoTagsLabel"><i class="fas fa-tags"></i> Video Tags</label>
                <textarea id="tagsBox" rows="3" placeholder="Optimized tags will appear here..." data-translate-key="videoTagsPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('tagsBox')"><i class="fas fa-copy"></i> Copy Tags</button>
            </div>

            <button class="btn btn-export" onclick="downloadTxt()" data-translate-key="exportButton"><i class="fas fa-download"></i> Export All</button>
        </section>
    </main>

    <footer>
        <div class="container">
            <p data-translate-key="footerText">Powered by <strong>YTSEO.ai</strong> ‚Äì Built with ‚ù§Ô∏è for global creators</p>
        </div>
    </footer>

    <script>
        // [Your translations object remains exactly the same]
        const translations = {
            en: { /* ... */ },
            hi: { /* ... */ },
            ur: { /* ... */ },
            ru: { /* ... */ },
            es: { /* ... */ },
            fr: { /* ... */ },
            de: { /* ... */ }
        };

        // [Your applyTranslations(), changeUILanguage(), copyToClipboard() remain the same]
        function applyTranslations(lang) {
            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.getAttribute('data-translate-key');
                if (translations[lang] && translations[lang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[lang][key];
                    } else if (element.tagName === 'OPTION') {
                        element.textContent = translations[lang][key];
                    } else if (element.tagName === 'BUTTON' && (key === 'darkModeButton' || key === 'lightModeButton')) {
                        element.innerHTML = document.body.classList.contains("dark") ? 
                            `<i class="fas fa-sun"></i> ${translations[lang].lightModeButton}` : 
                            `<i class="fas fa-moon"></i> ${translations[lang].darkModeButton}`;
                    } else {
                        element.textContent = translations[lang][key];
                    }
                }
            });
            const darkModeBtn = document.querySelector('[onclick="toggleDarkMode()"]');
            if (darkModeBtn) {
                darkModeBtn.innerHTML = document.body.classList.contains("dark") ? 
                    `<i class="fas fa-sun"></i> ${translations[lang].lightModeButton}` : 
                    `<i class="fas fa-moon"></i> ${translations[lang].darkModeButton}`;
            }
        }

        function changeUILanguage() {
            const lang = document.getElementById("uiLang").value;
            localStorage.setItem('ytseoUILang', lang);
            applyTranslations(lang);
        }

        function copyToClipboard(id) {
            const textarea = document.getElementById(id);
            textarea.select();
            document.execCommand("copy");

            const btn = document.querySelector(`[onclick="copyToClipboard('${id}')"]`);
            const originalHTML = btn.innerHTML;
            const currentLang = localStorage.getItem('ytseoUILang') || 'en';
            btn.innerHTML = `<i class="fas fa-check"></i> ${translations[currentLang].copiedSuccess}`;
            setTimeout(() => {
                btn.innerHTML = originalHTML;
            }, 2000);
        }

        // ========== UPDATED CORE FUNCTIONS ========== //
        
        async function fetchSEOData(contentLang = 'en') {
            try {
                const response = await fetch(`json/seo-${contentLang}.json`);
                if (!response.ok) throw new Error('Language not found');
                return await response.json();
            } catch (error) {
                console.warn(`Loading English fallback for ${contentLang}`);
                const enResponse = await fetch('json/seo-en.json');
                return await enResponse.json();
            }
        }

        async function generateSEO() {
            const topic = document.getElementById("inputTopic").value.trim();
            const contentLang = document.getElementById("language").value;
            const isShort = document.getElementById("type").value === "shorts";
            const type = isShort ? "shorts" : "long";
            const currentUILang = localStorage.getItem('ytseoUILang') || 'en';

            if (!topic) {
                alert(translations[currentUILang].alertEnterTopic);
                return;
            }

            // Show loading state
            const generateBtn = document.querySelector('[onclick="generateSEO()"]');
            const originalBtnText = generateBtn.innerHTML;
            generateBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ${translations[currentUILang].generatingText || 'Generating...'}`;
            generateBtn.disabled = true;

            try {
                // Load language-specific templates
                const { seo_templates, fallback } = await fetchSEOData(contentLang);
                
                // Find best matching template
                const template = findBestTemplate(topic, seo_templates);
                const chosenTemplate = template || fallback;

                // Generate variables
                const variables = {
                    topic,
                    language: contentLang,
                    video_type: isShort ? translations[contentLang]?.shortVideoOption || 'Short Video' : 
                                         translations[contentLang]?.longVideoOption || 'Long Video',
                    ...(chosenTemplate.variables || {})
                };

                // Generate output
                let titleTemplate, descriptionTemplate, tagsTemplate;
                
                if (chosenTemplate.templates) {
                    titleTemplate = chosenTemplate.templates.title[type];
                    descriptionTemplate = chosenTemplate.templates.description[type];
                    tagsTemplate = chosenTemplate.templates.tags.join(", ");
                } else {
                    titleTemplate = chosenTemplate.title;
                    descriptionTemplate = chosenTemplate.description;
                    tagsTemplate = Array.isArray(chosenTemplate.tags) ? 
                        chosenTemplate.tags.join(", ") : chosenTemplate.tags || '';
                }

                document.getElementById("titleBox").value = replacePlaceholders(titleTemplate, variables);
                document.getElementById("descBox").value = replacePlaceholders(descriptionTemplate, variables);
                
                const tagsRaw = replacePlaceholders(tagsTemplate, variables);
                document.getElementById("tagsBox").value = tagsRaw;
                document.getElementById("hashtagBox").value = tagsRaw.split(", ")
                    .map(t => `#${t.replace(/\s+/g, '')}`).join(" ");

            } catch (error) {
                console.error("Generation error:", error);
                alert(translations[currentUILang].alertGenerateError || "Error generating content");
            } finally {
                generateBtn.innerHTML = originalBtnText;
                generateBtn.disabled = false;
            }
        }

        // [Rest of your helper functions remain the same]
        function findBestTemplate(topic, templates) {
            const lowerTopic = topic.toLowerCase();
            let bestMatchTemplate = null;
            let maxMatchingScore = 0;

            for (const template of templates) {
                let currentScore = 0;
                template.keywords.forEach(kw => {
                    const lowerKw = kw.toLowerCase();
                    if (lowerTopic.includes(lowerKw)) {
                        currentScore += lowerKw.split(/\s+/).length * 
                            (lowerTopic === lowerKw ? 100 : 
                             lowerTopic.includes(lowerKw + ' ') ? 10 : 1);
                    }
                });

                if (currentScore > maxMatchingScore) {
                    maxMatchingScore = currentScore;
                    bestMatchTemplate = template;
                }
            }
            return bestMatchTemplate;
        }

        function replacePlaceholders(text, variables) {
            if (!text) return "";
            return text.replace(/{(\w+)}/g, (_, key) => {
                const options = variables[key];
                return Array.isArray(options) 
                    ? options[Math.floor(Math.random() * options.length)]
                    : (options !== undefined ? options : "");
            });
        }

        function resetFields() {
            document.getElementById("inputTopic").value = "";
            document.getElementById("language").selectedIndex = 0;
            document.getElementById("type").selectedIndex = 0;
            document.getElementById("titleBox").value = "";
            document.getElementById("descBox").value = "";
            document.getElementById("hashtagBox").value = "";
            document.getElementById("tagsBox").value = "";
        }

        function downloadTxt() {
            const title = document.getElementById("titleBox").value;
            const desc = document.getElementById("descBox").value;
            const tags = document.getElementById("tagsBox").value;
            const hashtags = document.getElementById("hashtagBox").value;
            const currentLang = localStorage.getItem('ytseoUILang') || 'en';

            if (!title && !desc && !tags && !hashtags) {
                alert(translations[currentLang].alertGenerateContent);
                return;
            }

            const content = `Title:\n${title}\n\nDescription:\n${desc}\n\nTags:\n${tags}\n\nHashtags:\n${hashtags}\n\nGenerated by YTSEO.ai`;
            const blob = new Blob([content], { type: "text/plain" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "ytseo-ai-content.txt";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function toggleDarkMode() {
            document.body.classList.toggle("dark");
            const btn = document.querySelector('[onclick="toggleDarkMode()"]');
            const currentLang = localStorage.getItem('ytseoUILang') || 'en';
            btn.innerHTML = document.body.classList.contains("dark") ? 
                `<i class="fas fa-sun"></i> ${translations[currentLang].lightModeButton}` : 
                `<i class="fas fa-moon"></i> ${translations[currentLang].darkModeButton}`;
            localStorage.setItem('ytseoDarkMode', document.body.classList.contains("dark"));
        }

        // INITIALIZE ON LOAD
        document.addEventListener('DOMContentLoaded', async () => {
            // Add generatingText to translations if missing
            if (!translations.en.generatingText) {
                for (const lang in translations) {
                    translations[lang].generatingText = {
                        en: "Generating...",
                        hi: "‡§ú‡§®‡§∞‡•á‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...",
                        ur: "ÿ™€åÿßÿ± €ÅŸà ÿ±€Åÿß €Å€í...",
                        ru: "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...",
                        es: "Generando...",
                        fr: "G√©n√©ration...",
                        de: "Wird generiert..."
                    }[lang] || "Generating...";
                }
            }

            // Apply UI language and dark mode
            const savedLang = localStorage.getItem('ytseoUILang') || 'en';
            document.getElementById('uiLang').value = savedLang;
            applyTranslations(savedLang);

            if (localStorage.getItem('ytseoDarkMode') === 'true') {
                document.body.classList.add('dark');
                const btn = document.querySelector('[onclick="toggleDarkMode()"]');
                const currentLang = localStorage.getItem('ytseoUILang') || 'en';
                btn.innerHTML = `<i class="fas fa-sun"></i> ${translations[currentLang].lightModeButton}`;
            }
        });
    </script>
</body>
</html>
