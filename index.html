<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTSEO.ai - Smart SEO for YouTube Videos</title>
    <meta name="description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta name="keywords" content="YouTube SEO, video optimization, title generator, description generator, tag generator, YouTube tools, AI SEO, content creator tools, content creation, video marketing, get more views, YouTube growth">
    <meta name="author" content="YTSEO.ai">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.ytseo.ai/">
    <meta property="og:title" content="YTSEO.ai - Smart SEO for YouTube Videos">
    <meta property="og:description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta property="og:image" content="https://www.ytseo.ai/og-image.jpg"> <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.ytseo.ai/">
    <meta property="twitter:title" content="YTSEO.ai - Smart SEO for YouTube Videos">
    <meta property="twitter:description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta property="twitter:image" content="https://www.ytseo.ai/twitter-image.jpg"> <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>YTSEO.ai</h1>
            <p data-translate-key="tagline">Smart SEO. More Views. Less Hassle.</p>
            <div class="header-controls">
                <select id="uiLang" onchange="changeUILanguage()">
                    <option value="en" data-translate-key="englishOption">English</option>
                    <option value="hi" data-translate-key="hindiOption">Hindi</option>
                    <option value="ur" data-translate-key="urduOption">Urdu</option>
                    <option value="ru" data-translate-key="russianOption">Russian</option>
                    <option value="es" data-translate-key="spanishOption">EspaÃ±ol</option>
                    <option value="fr" data-translate-key="frenchOption">FranÃ§ais</option>
                    <option value="de" data-translate-key="germanOption">Deutsch</option>
                </select>
                <button onclick="toggleDarkMode()" data-translate-key="darkModeButton">ğŸŒ™ Dark Mode</button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="input-section card">
            <div class="form-group">
                <label for="inputTopic" data-translate-key="videoTopicLabel"><i class="fas fa-pencil-alt"></i> Video Topic/Script</label>
                <textarea id="inputTopic" rows="4" placeholder="e.g. A story about a lion who learns humility..." data-translate-key="videoTopicPlaceholder"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="language" data-translate-key="contentLanguageLabel"><i class="fas fa-globe"></i> Content Language</label>
                    <select id="language">
                        <option value="en" data-translate-key="englishOption">English</option>
                        <option value="hi" data-translate-key="hindiOption">Hindi</option>
                        <option value="ur" data-translate-key="urduOption">Urdu</option>
                        <option value="ru" data-translate-key="russianOption">Russian</option>
                        <option value="es" data-translate-key="spanishOption">EspaÃ±ol</option>
                        <option value="fr" data-translate-key="frenchOption">FranÃ§ais</option>
                        <option value="de" data-translate-key="germanOption">Deutsch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="type" data-translate-key="videoFormatLabel"><i class="fas fa-video"></i> Video Format</label>
                    <select id="type">
                        <option value="shorts" data-translate-key="shortVideoOption">Short Video</option>
                        <option value="long" data-translate-key="longVideoOption">Long Video</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="generateSEO()" data-translate-key="generateSEOButton"><i class="fas fa-bolt"></i> Generate SEO</button>
                <button class="btn btn-secondary" onclick="resetFields()" data-translate-key="resetButton"><i class="fas fa-redo-alt"></i> Reset</button>
            </div>
        </section>

        <section class="output-section card">
            <div class="output-group">
                <label for="titleBox" data-translate-key="titleLabel"><i class="fas fa-heading"></i> Title</label>
                <textarea id="titleBox" rows="2" placeholder="Your optimized title will appear here..." data-translate-key="titlePlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('titleBox')"><i class="fas fa-copy"></i> Copy Title</button>
            </div>

            <div class="output-group">
                <label for="descBox" data-translate-key="descriptionLabel"><i class="fas fa-align-left"></i> Description</label>
                <textarea id="descBox" rows="6" placeholder="Your SEO description will appear here..." data-translate-key="descriptionPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('descBox')"><i class="fas fa-copy"></i> Copy Description</button>
            </div>

            <div class="output-group">
                <label for="hashtagBox" data-translate-key="hashtagsLabel"><i class="fas fa-hashtag"></i> Hashtags</label>
                <textarea id="hashtagBox" rows="2" placeholder="Relevant hashtags will appear here..." data-translate-key="hashtagsPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('hashtagBox')"><i class="fas fa-copy"></i> Copy Hashtags</button>
            </div>

            <div class="output-group">
                <label for="tagsBox" data-translate-key="videoTagsLabel"><i class="fas fa-tags"></i> Video Tags</label>
                <textarea id="tagsBox" rows="3" placeholder="Optimized tags will appear here..." data-translate-key="videoTagsPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('tagsBox')"><i class="fas fa-copy"></i> Copy Tags</button>
            </div>

            <button class="btn btn-export" onclick="downloadTxt()" data-translate-key="exportButton"><i class="fas fa-download"></i> Export All</button>
        </section>
    </main>

    <footer>
        <div class="container">
            <p data-translate-key="footerText">Powered by <strong>YTSEO.ai</strong> â€“ Built with â¤ï¸ for global creators</p>
        </div>
    </footer>

   <script>
    // --- UI Translations (from your provided script) ---
    const translations = {
        en: {
            darkModeButton: 'ğŸŒ™ Dark Mode',
            lightModeButton: 'â˜€ï¸ Light Mode',
            tagline: 'Smart SEO. More Views. Less Hassle.',
            videoTopicLabel: 'ğŸ“ Video Topic for AI Generation', // Renamed for clarity with AI focus
            videoTopicPlaceholder: 'e.g. A story about a lion who learns humility...',
            contentLanguageLabel: 'ğŸŒ Content Language',
            englishOption: 'English',
            hindiOption: 'Hindi',
            urduOption: 'Urdu',
            russianOption: 'Russian',
            spanishOption: 'EspaÃ±ol',
            frenchOption: 'FranÃ§ais',
            germanOption: 'Deutsch',
            videoFormatLabel: 'ğŸ¬ Video Format',
            shortVideoOption: 'Short Video',
            longVideoOption: 'Long Video',
            generateSEOButton: 'âš¡ Generate SEO',
            resetButton: 'ğŸ” Reset',
            exportButton: 'ğŸ“¥ Export All',
            titleLabel: 'ğŸ¯ Title',
            titlePlaceholder: 'Your optimized title will appear here...',
            copyTitleButton: 'Copy Title',
            descriptionLabel: 'ğŸ“ Description',
            descriptionPlaceholder: 'Your SEO description will appear here...',
            hashtagsLabel: 'ğŸ“Œ Hashtags',
            hashtagsPlaceholder: 'Relevant hashtags will appear here...',
            videoTagsLabel: 'ğŸ”– Video Tags',
            videoTagsPlaceholder: 'Optimized tags will appear here...',
            copyTagsButton: 'Copy Tags',
            copyHashtagsButton: 'Copy Hashtags',
            footerText: 'Powered by <strong>YTSEO.ai</strong> â€“ Built with â¤ï¸ for global creators',
            alertEnterTopic: 'Please enter a video topic for AI generation, or select a Niche/Keyword for manual generation!', // Updated alert
            alertGenerateContent: 'Generate some content first!',
            copiedSuccess: 'âœ“ Copied!',
            generatingText: 'Generating...', // Added for loading state
            selectNicheCategory: 'Select Niche/Category', // Added for Niche dropdown
            selectSpecificKeyword: 'Select Specific Keyword', // Added for Keyword dropdown
            noNichesAvailable: 'No Niches Available', // Added for Niche fallback
            noKeywordsAvailable: 'No Keywords Available', // Added for Keyword fallback
            orLabel: 'OR' // Added for "OR" divider
        },
        hi: {
            darkModeButton: 'ğŸŒ™ à¤¡à¤¾à¤°à¥à¤• à¤®à¥‹à¤¡',
            lightModeButton: 'â˜€ï¸ à¤²à¤¾à¤‡à¤Ÿ à¤®à¥‹à¤¡',
            tagline: 'à¤¸à¥à¤®à¤¾à¤°à¥à¤Ÿ à¤à¤¸à¤ˆà¤“à¥¤ à¤…à¤§à¤¿à¤• à¤µà¥à¤¯à¥‚à¤œà¥¤ à¤•à¤® à¤ªà¤°à¥‡à¤¶à¤¾à¤¨à¥€à¥¤',
            videoTopicLabel: 'ğŸ“ à¤à¤†à¤ˆ à¤œà¤¨à¤°à¥‡à¤¶à¤¨ à¤•à¥‡ à¤²à¤¿à¤ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤µà¤¿à¤·à¤¯',
            videoTopicPlaceholder: 'à¤‰à¤¦à¤¾. à¤à¤• à¤¶à¥‡à¤° à¤•à¥€ à¤•à¤¹à¤¾à¤¨à¥€ à¤œà¥‹ à¤µà¤¿à¤¨à¤®à¥à¤°à¤¤à¤¾ à¤¸à¥€à¤–à¤¤à¤¾ à¤¹à¥ˆ...',
            contentLanguageLabel: 'ğŸŒ à¤¸à¤¾à¤®à¤—à¥à¤°à¥€ à¤­à¤¾à¤·à¤¾',
            englishOption: 'à¤…à¤‚à¤—à¥à¤°à¥‡à¤œà¥€',
            hindiOption: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',
            urduOption: 'Ø§Ø±Ø¯Ùˆ',
            russianOption: 'à¤°à¥‚à¤¸à¥€',
            spanishOption: 'à¤¸à¥à¤ªà¥‡à¤¨à¤¿à¤¶',
            frenchOption: 'à¤«à¥à¤°à¥‡à¤‚à¤š',
            germanOption: 'à¤œà¤°à¥à¤®à¤¨',
            videoFormatLabel: 'ğŸ¬ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤ªà¥à¤°à¤¾à¤°à¥‚à¤ª',
            shortVideoOption: 'à¤›à¥‹à¤Ÿà¤¾ à¤µà¥€à¤¡à¤¿à¤¯à¥‹',
            longVideoOption: 'à¤²à¤‚à¤¬à¤¾ à¤µà¥€à¤¡à¤¿à¤¯à¥‹',
            generateSEOButton: 'âš¡ à¤à¤¸à¤ˆà¤“ à¤œà¤¨à¤°à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚',
            copyTitleButton: 'à¤¶à¥€à¤°à¥à¤·à¤• à¤•à¥‰à¤ªà¥€ à¤•à¤°à¥‡à¤‚',
            resetButton: 'ğŸ” à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚',
            exportButton: 'ğŸ“¥ à¤¸à¤­à¥€ à¤¨à¤¿à¤°à¥à¤¯à¤¾à¤¤ à¤•à¤°à¥‡à¤‚',
            titleLabel: 'ğŸ¯ à¤¶à¥€à¤°à¥à¤·à¤•',
            titlePlaceholder: 'à¤†à¤ªà¤•à¤¾ à¤…à¤¨à¥à¤•à¥‚à¤²à¤¿à¤¤ à¤¶à¥€à¤°à¥à¤·à¤• à¤¯à¤¹à¤¾à¤‚ à¤¦à¤¿à¤–à¤¾à¤ˆ à¤¦à¥‡à¤—à¤¾...',
            descriptionLabel: 'ğŸ“ à¤µà¤¿à¤µà¤°à¤£',
            descriptionPlaceholder: 'à¤†à¤ªà¤•à¤¾ à¤à¤¸à¤ˆà¤“ à¤µà¤¿à¤µà¤°à¤£ à¤¯à¤¹à¤¾à¤‚ à¤¦à¤¿à¤–à¤¾à¤ˆ à¤¦à¥‡à¤—à¤¾...',
            hashtagsLabel: 'ğŸ“Œ à¤¹à¥ˆà¤¶à¤Ÿà¥ˆà¤—',
            hashtagsPlaceholder: 'à¤ªà¥à¤°à¤¾à¤¸à¤‚à¤—à¤¿à¤• à¤¹à¥ˆà¤¶à¤Ÿà¥ˆà¤— à¤¯à¤¹à¤¾à¤‚ à¤¦à¤¿à¤–à¤¾à¤ˆ à¤¦à¥‡à¤‚à¤—à¥‡...',
            videoTagsLabel: 'ğŸ”– à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤Ÿà¥ˆà¤—',
            videoTagsPlaceholder: 'à¤…à¤¨à¥à¤•à¥‚à¤²à¤¿à¤¤ à¤Ÿà¥ˆà¤— à¤¯à¤¹à¤¾à¤‚ à¤¦à¤¿à¤–à¤¾à¤ˆ à¤¦à¥‡à¤‚à¤—à¥‡...',
            copyTagsButton: 'à¤Ÿà¥ˆà¤— à¤•à¥‰à¤ªà¥€ à¤•à¤°à¥‡à¤‚',
            copyHashtagsButton: 'à¤¹à¥ˆà¤¶à¤Ÿà¥ˆà¤— à¤•à¥‰à¤ªà¥€ à¤•à¤°à¥‡à¤‚',
            footerText: '<strong>YTSEO.ai</strong> à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤¸à¤‚à¤šà¤¾à¤²à¤¿à¤¤ â€“ à¤µà¥ˆà¤¶à¥à¤µà¤¿à¤• à¤°à¤šà¤¨à¤¾à¤•à¤¾à¤°à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤ â¤ï¸ à¤¸à¥‡ à¤¨à¤¿à¤°à¥à¤®à¤¿à¤¤',
            alertEnterTopic: 'à¤•à¥ƒà¤ªà¤¯à¤¾ à¤à¤†à¤ˆ à¤œà¤¨à¤°à¥‡à¤¶à¤¨ à¤•à¥‡ à¤²à¤¿à¤ à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤µà¤¿à¤·à¤¯ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚, à¤¯à¤¾ à¤®à¥ˆà¤¨à¥à¤¯à¥à¤…à¤² à¤œà¤¨à¤°à¥‡à¤¶à¤¨ à¤•à¥‡ à¤²à¤¿à¤ à¤†à¤²à¤¾/à¤•à¥€à¤µà¤°à¥à¤¡ à¤šà¥à¤¨à¥‡à¤‚!',
            alertGenerateContent: 'à¤ªà¤¹à¤²à¥‡ à¤•à¥à¤› à¤¸à¤¾à¤®à¤—à¥à¤°à¥€ à¤œà¤¨à¤°à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚!',
            copiedSuccess: 'âœ“ à¤•à¥‰à¤ªà¥€ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾!',
            generatingText: 'à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...',
            selectNicheCategory: 'à¤†à¤²à¤¾/à¤¶à¥à¤°à¥‡à¤£à¥€ à¤šà¥à¤¨à¥‡à¤‚',
            selectSpecificKeyword: 'à¤µà¤¿à¤¶à¤¿à¤·à¥à¤Ÿ à¤•à¥€à¤µà¤°à¥à¤¡ à¤šà¥à¤¨à¥‡à¤‚',
            noNichesAvailable: 'à¤•à¥‹à¤ˆ à¤†à¤²à¤¾ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚',
            noKeywordsAvailable: 'à¤•à¥‹à¤ˆ à¤•à¥€à¤µà¤°à¥à¤¡ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚',
            orLabel: 'à¤¯à¤¾'
        },
        ur: {
            darkModeButton: 'ğŸŒ™ ÚˆØ§Ø±Ú© Ù…ÙˆÚˆ',
            lightModeButton: 'â˜€ï¸ Ù„Ø§Ø¦Ù¹ Ù…ÙˆÚˆ',
            tagline: 'Ø³Ù…Ø§Ø±Ù¹ Ø§ÛŒØ³ Ø§ÛŒ Ø§ÙˆÛ” Ù…Ø²ÛŒØ¯ Ø¢Ø±Ø§Ø¡Û” Ú©Ù… Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒÛ”',
            videoTopicLabel: 'ğŸ“ Ø§Û’ Ø¢Ø¦ÛŒ Ø¬Ù†Ø±ÛŒØ´Ù† Ú©Û’ Ù„ÛŒÛ’ ÙˆÛŒÚˆÛŒÙˆ Ú©Ø§ Ù…ÙˆØ¶ÙˆØ¹',
            videoTopicPlaceholder: 'Ù…Ø«Ø§Ù„ Ú©Û’ Ø·ÙˆØ± Ù¾Ø±: Ø§ÛŒÚ© Ø´ÛŒØ± Ú©ÛŒ Ú©ÛØ§Ù†ÛŒ Ø¬Ùˆ Ø¹Ø§Ø¬Ø²ÛŒ Ø³ÛŒÚ©Ú¾ØªØ§ ÛÛ’...',
            contentLanguageLabel: 'ğŸŒ Ù…ÙˆØ§Ø¯ Ú©ÛŒ Ø²Ø¨Ø§Ù†',
            englishOption: 'Ø§Ù†Ú¯Ø±ÛŒØ²ÛŒ',
            hindiOption: 'ÛÙ†Ø¯ÛŒ',
            urduOption: 'Ø§Ø±Ø¯Ùˆ',
            russianOption: 'Ø±ÙˆØ³ÛŒ',
            spanishOption: 'ÛØ³Ù¾Ø§Ù†ÙˆÛŒ',
            frenchOption: 'ÙØ±Ø§Ù†Ø³ÛŒØ³ÛŒ',
            germanOption: 'Ø¬Ø±Ù…Ù†',
            videoFormatLabel: 'ğŸ¬ ÙˆÛŒÚˆÛŒÙˆ ÙØ§Ø±Ù…ÛŒÙ¹',
            shortVideoOption: 'Ù…Ø®ØªØµØ± ÙˆÛŒÚˆÛŒÙˆ',
            longVideoOption: 'Ø·ÙˆÛŒÙ„ ÙˆÛŒÚˆÛŒÙˆ',
            generateSEOButton: 'âš¡ Ø§ÛŒØ³ Ø§ÛŒ Ø§Ùˆ Ø¨Ù†Ø§Ø¦ÛŒÚº',
            resetButton: 'ğŸ” Ø±ÛŒ Ø³ÛŒÙ¹ Ú©Ø±ÛŒÚº',
            exportButton: 'ğŸ“¥ Ø³Ø¨ Ø§ÛŒÚ©Ø³Ù¾ÙˆØ±Ù¹ Ú©Ø±ÛŒÚº',
            titleLabel: 'ğŸ¯ Ø¹Ù†ÙˆØ§Ù†',
            titlePlaceholder: 'Ø¢Ù¾ Ú©Ø§ Ø¨ÛØªØ± Ú©Ø±Ø¯Û Ø¹Ù†ÙˆØ§Ù† ÛŒÛØ§Úº Ø¸Ø§ÛØ± ÛÙˆÚ¯Ø§...',
            copyTitleButton: 'Ø¹Ù†ÙˆØ§Ù† Ú©Ø§Ù¾ÛŒ Ú©Ø±ÛŒÚº',
            descriptionLabel: 'ğŸ“ ØªÙØµÛŒÙ„',
            descriptionPlaceholder: 'Ø¢Ù¾ Ú©Ø§ Ø§ÛŒØ³ Ø§ÛŒ Ø§Ùˆ ØªÙØµÛŒÙ„ ÛŒÛØ§Úº Ø¸Ø§ÛØ± ÛÙˆÚ¯Ø§...',
            hashtagsLabel: 'ğŸ“Œ ÛÛŒØ´ Ù¹ÛŒÚ¯Ø²',
            hashtagsPlaceholder: 'Ù…ØªØ¹Ù„Ù‚Û ÛÛŒØ´ Ù¹ÛŒÚ¯Ø² ÛŒÛØ§Úº Ø¸Ø§ÛØ± ÛÙˆÚº Ú¯Û’...',
            videoTagsLabel: 'ğŸ”– ÙˆÛŒÚˆÛŒÙˆ Ù¹ÛŒÚ¯Ø²',
            videoTagsPlaceholder: 'Ø¨ÛØªØ± Ú©Ø±Ø¯Û Ù¹ÛŒÚ¯Ø² ÛŒÛØ§Úº Ø¸Ø§ÛØ± ÛÙˆÚº Ú¯Û’...',
            copyTagsButton: 'Ù¹ÛŒÚ¯Ø² Ú©Ø§Ù¾ÛŒ Ú©Ø±ÛŒÚº',
            copyHashtagsButton: 'ÛÛŒØ´ Ù¹ÛŒÚ¯Ø² Ú©Ø§Ù¾ÛŒ Ú©Ø±ÛŒÚº',
            footerText: '<strong>YTSEO.ai</strong> Ú©Û’ Ø°Ø±ÛŒØ¹Û’ ØªÙ‚ÙˆÛŒØª ÛŒØ§ÙØªÛ â€“ Ø¹Ø§Ù„Ù…ÛŒ ØªØ®Ù„ÛŒÙ‚ Ú©Ø§Ø±ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ â¤ï¸ Ø³Û’ Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§',
            alertEnterTopic: 'Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Û’ Ø¢Ø¦ÛŒ Ø¬Ù†Ø±ÛŒØ´Ù† Ú©Û’ Ù„ÛŒÛ’ ÙˆÛŒÚˆÛŒÙˆ Ú©Ø§ Ù…ÙˆØ¶ÙˆØ¹ Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºØŒ ÛŒØ§ Ø¯Ø³ØªÛŒ Ø¬Ù†Ø±ÛŒØ´Ù† Ú©Û’ Ù„ÛŒÛ’ Ù…ÙˆØ¶ÙˆØ¹/Ú©Ù„ÛŒØ¯ÛŒ Ù„ÙØ¸ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº!',
            alertGenerateContent: 'Ù¾ÛÙ„Û’ Ú©Ú†Ú¾ Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø§Ø¦ÛŒÚº!',
            copiedSuccess: 'âœ“ Ú©Ø§Ù¾ÛŒ Ú©ÛŒØ§ Ú¯ÛŒØ§!',
            generatingText: 'Ø¨Ù†Ø§ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’...',
            selectNicheCategory: 'Ù…ÙˆØ¶ÙˆØ¹/Ø²Ù…Ø±Û Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº',
            selectSpecificKeyword: 'Ù…Ø®ØµÙˆØµ Ú©Ù„ÛŒØ¯ÛŒ Ù„ÙØ¸ Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº',
            noNichesAvailable: 'Ú©ÙˆØ¦ÛŒ Ù…ÙˆØ¶ÙˆØ¹ Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚº',
            noKeywordsAvailable: 'Ú©ÙˆØ¦ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ù„ÙØ¸ Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚº',
            orLabel: 'ÛŒØ§'
        },
        ru: {
            darkModeButton: 'ğŸŒ™ Ğ¢ĞµĞ¼Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼',
            lightModeButton: 'â˜€ï¸ Ğ¡Ğ²ĞµÑ‚Ğ»Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼',
            tagline: 'Ğ£Ğ¼Ğ½Ğ¾Ğµ SEO. Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¾Ğ². ĞœĞµĞ½ÑŒÑˆĞµ Ñ…Ğ»Ğ¾Ğ¿Ğ¾Ñ‚.',
            videoTopicLabel: 'ğŸ“ Ğ¢ĞµĞ¼Ğ° Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ´Ğ»Ñ Ğ˜Ğ˜-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸',
            videoTopicPlaceholder: 'ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾ Ğ»ÑŒĞ²Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ÑƒÑ‡Ğ¸Ñ‚ÑÑ ÑĞºÑ€Ğ¾Ğ¼Ğ½Ğ¾ÑÑ‚Ğ¸...',
            contentLanguageLabel: 'ğŸŒ Ğ¯Ğ·Ñ‹Ğº ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°',
            englishOption: 'ĞĞ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹',
            hindiOption: 'Ğ¥Ğ¸Ğ½Ğ´Ğ¸',
            urduOption: 'Ğ£Ñ€du',
            russianOption: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',
            spanishOption: 'Ğ˜ÑĞ¿Ğ°Ğ½ÑĞºĞ¸Ğ¹',
            frenchOption: 'Ğ¤Ñ€Ğ°Ğ½Ñ†ÑƒĞ·ÑĞºĞ¸Ğ¹',
            germanOption: 'ĞĞµĞ¼ĞµÑ†ĞºĞ¸Ğ¹',
            videoFormatLabel: 'ğŸ¬ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ²Ğ¸Ğ´ĞµĞ¾',
            shortVideoOption: 'ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾',
            longVideoOption: 'Ğ”Ğ»Ğ¸Ğ½Ğ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾',
            generateSEOButton: 'âš¡ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ SEO',
            resetButton: 'ğŸ” Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ',
            exportButton: 'ğŸ“¥ Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ',
            titleLabel: 'ğŸ¯ Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº',
            titlePlaceholder: 'Ğ’Ğ°Ñˆ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Ğ·Ğ´ĞµÑÑŒ...',
            descriptionLabel: 'ğŸ“ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ',
            descriptionPlaceholder: 'Ğ’Ğ°ÑˆĞµ SEO-Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Ğ·Ğ´ĞµÑÑŒ...',
            hashtagsLabel: 'ğŸ“Œ Ğ¥ÑÑˆÑ‚ĞµĞ³Ğ¸',
            hashtagsPlaceholder: 'Ğ¡Ğ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ñ…ÑÑˆÑ‚ĞµĞ³Ğ¸ Ğ¿Ğ¾ÑĞ²ÑÑ‚ÑÑ Ğ·Ğ´ĞµÑÑŒ...',
            videoTagsLabel: 'ğŸ”– Ğ¢ĞµĞ³Ğ¸ Ğ²Ğ¸Ğ´ĞµĞ¾',
            videoTagsPlaceholder: 'ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµĞ³Ğ¸ Ğ¿Ğ¾ÑĞ²ÑÑ‚ÑÑ Ğ·Ğ´ĞµÑÑŒ...',
            copyTagsButton: 'ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ³Ğ¸',
            copyHashtagsButton: 'ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ…ÑÑˆÑ‚ĞµĞ³Ğ¸',
            footerText: 'Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° <strong>YTSEO.ai</strong> â€“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ Ñ â¤ï¸ Ğ´Ğ»Ñ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ²',
            alertEnterTopic: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞ¼Ñƒ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ´Ğ»Ñ Ğ˜Ğ˜-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸, Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ½Ğ¸ÑˆÑƒ/ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ´Ğ»Ñ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸!',
            alertGenerateContent: 'Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ°ĞºĞ¾Ğ¹-Ğ»Ğ¸Ğ±Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚!',
            copiedSuccess: 'âœ“ Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!',
            generatingText: 'Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑ...',
            selectNicheCategory: 'Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ½Ğ¸ÑˆÑƒ/ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ',
            selectSpecificKeyword: 'Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾',
            noNichesAvailable: 'ĞĞ¸ÑˆĞ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹',
            noKeywordsAvailable: 'ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ° Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹',
            orLabel: 'Ğ˜Ğ›Ğ˜'
        },
        es: {
            darkModeButton: 'ğŸŒ™ Modo Oscuro',
            lightModeButton: 'â˜€ï¸ Modo Claro',
            tagline: 'SEO Inteligente. MÃ¡s Vistas. Menos Complicaciones.',
            videoTopicLabel: 'ğŸ“ Tema del Video para GeneraciÃ³n IA',
            videoTopicPlaceholder: 'Ej. Una historia sobre un leÃ³n que aprende humildad...',
            contentLanguageLabel: 'ğŸŒ Idioma del Contenido',
            englishOption: 'InglÃ©s',
            hindiOption: 'Hindi',
            urduOption: 'Urdu',
            russianOption: 'Ruso',
            spanishOption: 'EspaÃ±ol',
            frenchOption: 'FrancÃ©s',
            germanOption: 'AlemÃ¡n',
            videoFormatLabel: 'ğŸ¬ Formato de Video',
            shortVideoOption: 'Video Corto',
            longVideoOption: 'Video Largo',
            generateSEOButton: 'âš¡ Generar SEO',
            resetButton: 'ğŸ” Reiniciar',
            exportButton: 'ğŸ“¥ Exportar Todo',
            titleLabel: 'ğŸ¯ TÃ­tulo',
            titlePlaceholder: 'Tu tÃ­tulo optimizado aparecerÃ¡ aquÃ­...',
            copyTitleButton: 'Copiar TÃ­tulo',
            descriptionLabel: 'ğŸ“ DescripciÃ³n',
            descriptionPlaceholder: 'Tu descripciÃ³n SEO aparecerÃ¡ aquÃ­...',
            hashtagsLabel: 'ğŸ“Œ Hashtags',
            hashtagsPlaceholder: 'Los hashtags relevantes aparecerÃ¡n aquÃ­...',
            videoTagsLabel: 'ğŸ”– Etiquetas de Video',
            videoTagsPlaceholder: 'Las etiquetas optimizadas aparecerÃ¡n aquÃ­...',
            copyTagsButton: 'Copiar Etiquetas',
            copyHashtagsButton: 'Copiar Hashtags',
            footerText: 'Impulsado por <strong>YTSEO.ai</strong> â€“ Creado con â¤ï¸ para creadores globales',
            alertEnterTopic: 'Â¡Por favor, ingresa un tema de video para generaciÃ³n IA, o selecciona una Nicho/Palabra clave para generaciÃ³n manual!',
            alertGenerateContent: 'Â¡Genera algo de contenido primero!',
            copiedSuccess: 'âœ“ Copiado!',
            generatingText: 'Generando...',
            selectNicheCategory: 'Seleccionar Nicho/CategorÃ­a',
            selectSpecificKeyword: 'Seleccionar Palabra Clave EspecÃ­fica',
            noNichesAvailable: 'No hay Nichos Disponibles',
            noKeywordsAvailable: 'No hay Palabras Clave Disponibles',
            orLabel: 'O'
        },
        fr: {
            darkModeButton: 'ğŸŒ™ Mode Sombre',
            lightModeButton: 'â˜€ï¸ Mode Clair',
            tagline: 'SEO Intelligent. Plus de Vues. Moins de Tracas.',
            videoTopicLabel: 'ğŸ“ Sujet VidÃ©o pour GÃ©nÃ©ration IA',
            videoTopicPlaceholder: 'Ex: Une histoire sur un lion qui apprend l\'humilitÃ©...',
            contentLanguageLabel: 'ğŸŒ Langue du Contenu',
            englishOption: 'Anglais',
            hindiOption: 'Hindi',
            urduOption: 'Ourdou',
            russianOption: 'Russe',
            spanishOption: 'Espagnol',
            frenchOption: 'FranÃ§ais',
            germanOption: 'Allemand',
            videoFormatLabel: 'ğŸ¬ Format VidÃ©o',
            shortVideoOption: 'Courte VidÃ©o',
            longVideoOption: 'Longue VidÃ©o',
            generateSEOButton: 'âš¡ GÃ©nÃ©rer SEO',
            resetButton: 'ğŸ” RÃ©initialiser',
            exportButton: 'ğŸ“¥ Tout Exporter',
            titleLabel: 'ğŸ¯ Titre',
            titlePlaceholder: 'Votre titre optimisÃ© apparaÃ®tra ici...',
            copyTitleButton: 'Copier le Titre',
            descriptionLabel: 'ğŸ“ Description',
            descriptionPlaceholder: 'Votre description SEO apparaÃ®tra ici...',
            hashtagsLabel: 'ğŸ“Œ Hashtags',
            hashtagsPlaceholder: 'Les hashtags pertinents apparaÃ®tront ici...',
            videoTagsLabel: 'ğŸ”– Mots-clÃ©s VidÃ©o',
            videoTagsPlaceholder: 'Les mots-clÃ©s optimisÃ©s apparaÃ®tront ici...',
            copyTagsButton: 'Copier les Mots-clÃ©s',
            copyHashtagsButton: 'Copier les Hashtags',
            footerText: 'PropulsÃ© par <strong>YTSEO.ai</strong> â€“ ConÃ§u avec â¤ï¸ pour les crÃ©ateurs mondiaux',
            alertEnterTopic: 'Veuillez d\'abord saisir un sujet de vidÃ©o pour la gÃ©nÃ©ration IA, ou sÃ©lectionner une niche/mot-clÃ© pour la gÃ©nÃ©ration manuelle !',
            alertGenerateContent: 'GÃ©nÃ©rez d\'abord du contenu !',
            copiedSuccess: 'âœ“ CopiÃ© !',
            generatingText: 'GÃ©nÃ©ration en cours...',
            selectNicheCategory: 'SÃ©lectionner Niche/CatÃ©gorie',
            selectSpecificKeyword: 'SÃ©lectionner Mot-clÃ© SpÃ©cifique',
            noNichesAvailable: 'Aucune Niche Disponible',
            noKeywordsAvailable: 'Aucun Mot-clÃ© Disponible',
            orLabel: 'OU'
        },
        de: {
            darkModeButton: 'ğŸŒ™ Dunkelmodus',
            lightModeButton: 'â˜€ï¸ Hellmodus',
            tagline: 'Smartes SEO. Mehr Aufrufe. Weniger Aufwand.',
            videoTopicLabel: 'ğŸ“ Video-Thema fÃ¼r KI-Generierung',
            videoTopicPlaceholder: 'z.B. Eine Geschichte Ã¼ber einen LÃ¶wen, der Demut lernt...',
            contentLanguageLabel: 'ğŸŒ Inhaltssprache',
            englishOption: 'Englisch',
            hindiOption: 'Hindi',
            urduOption: 'Urdu',
            russianOption: 'Russisch',
            spanishOption: 'Spanisch',
            frenchOption: 'FranzÃ¶sisch',
            germanOption: 'Deutsch',
            videoFormatLabel: 'ğŸ¬ Video-Format',
            shortVideoOption: 'Kurzvideo',
            longVideoOption: 'Langvideo',
            generateSEOButton: 'âš¡ SEO Generieren',
            resetButton: 'ğŸ” ZurÃ¼cksetzen',
            exportButton: 'ğŸ“¥ Alles Exportieren',
            titleLabel: 'ğŸ¯ Titel',
            titlePlaceholder: 'Ihr optimierter Titel wird hier erscheinen...',
            copyTitleButton: 'Titel kopieren',
            descriptionLabel: 'ğŸ“ Beschreibung',
            descriptionPlaceholder: 'Ihre SEO-Beschreibung wird hier erscheinen...',
            hashtagsLabel: 'ğŸ“Œ Hashtags',
            hashtagsPlaceholder: 'Relevante Hashtags werden hier erscheinen...',
            videoTagsLabel: 'ğŸ”– Video-Tags',
            videoTagsPlaceholder: 'Optimierte Tags werden hier erscheinen...',
            copyTagsButton: 'Tags kopieren',
            copyHashtagsButton: 'Hashtags kopieren',
            footerText: 'Powered by <strong>YTSEO.ai</strong> â€“ Mit â¤ï¸ fÃ¼r globale Kreative erstellt',
            alertEnterTopic: 'Bitte geben Sie zuerst ein Video-Thema fÃ¼r die KI-Generierung ein oder wÃ¤hlen Sie eine Nische/SchlÃ¼sselwort fÃ¼r die manuelle Generierung!',
            alertGenerateContent: 'Generieren Sie zuerst Inhalte!',
            copiedSuccess: 'âœ“ Kopiert!',
            generatingText: 'Generieren...',
            selectNicheCategory: 'Nische/Kategorie auswÃ¤hlen',
            selectSpecificKeyword: 'Spezifisches SchlÃ¼sselwort auswÃ¤hlen',
            noNichesAvailable: 'Keine Nischen verfÃ¼gbar',
            noKeywordsAvailable: 'Keine SchlÃ¼sselwÃ¶rter verfÃ¼gbar',
            orLabel: 'ODER'
        }
    };

    function applyTranslations(lang) {
        document.querySelectorAll('[data-translate-key]').forEach(element => {
            const key = element.getAttribute('data-translate-key');
            if (translations[lang] && translations[lang][key]) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translations[lang][key];
                } else if (element.tagName === 'OPTION') {
                    element.textContent = translations[lang][key];
                } else {
                    element.innerHTML = translations[lang][key];
                }
            }
        });
        const darkModeBtn = document.querySelector('[onclick="toggleDarkMode()"]');
        if (darkModeBtn) {
            darkModeBtn.innerHTML = document.body.classList.contains("dark") ? `<i class="fas fa-sun"></i> ${translations[lang].lightModeButton}` : `<i class="fas fa-moon"></i> ${translations[lang].darkModeButton}`;
        }
        // Update Niche/Keyword/OR labels as well
        document.getElementById('nicheLabel').textContent = translations[lang].selectNicheCategory;
        document.getElementById('keywordLabel').textContent = translations[lang].selectSpecificKeyword;
        document.getElementById('orDivider').textContent = translations[lang].orLabel;
        document.getElementById('aiTopicLabel').textContent = translations[lang].videoTopicLabel;
    }

    function changeUILanguage() {
        const lang = document.getElementById("uiLang").value;
        localStorage.setItem('ytseoUILang', lang);
        applyTranslations(lang);
    }

    // --- DOM Element References (Using your provided IDs where applicable) ---
    const uiLangSelect = document.getElementById('uiLang');
    const inputTopic = document.getElementById('inputTopic'); // Your existing ID
    const contentLangSelect = document.getElementById('language'); // Your existing ID
    const nicheSelect = document.getElementById('nicheSelect');
    const keywordSelect = document.getElementById('keywordSelect');
    const videoTypeSelect = document.getElementById('type'); // Your existing ID
    const variablesSection = document.getElementById('variablesSection');
    const variableInputs = document.getElementById('variableInputs');
    const generateBtn = document.getElementById('generateBtn'); // Your existing ID
    const resetBtn = document.getElementById('resetBtn'); // Your existing ID
    const generatedTitle = document.getElementById('titleBox'); // Your existing ID
    const generatedDescription = document.getElementById('descBox'); // Your existing ID
    const generatedHashtags = document.getElementById('hashtagBox'); // Your existing ID
    const generatedTags = document.getElementById('tagsBox'); // Your existing ID

    let seoData = {}; // This will hold the entire loaded JSON data for the current content language
    let currentTemplate = null; // Stores the currently selected template object (the 'templates' object from JSON)

    // Helper to format names (niche or variable) for display
    function formatNameForDisplay(name) {
        return name.replace(/_/g, ' ').replace(/\b\w/g, char => char.toUpperCase());
    }

    // Helper to copy text to clipboard
    function copyToClipboard(elementId) {
        const textarea = document.getElementById(elementId);
        textarea.select();
        textarea.setSelectionRange(0, 99999);
        document.execCommand("copy");

        const btn = document.querySelector(`[onclick="copyToClipboard('${elementId}')"]`);
        const originalHTML = btn.innerHTML;
        const currentLang = localStorage.getItem('ytseoUILang') || 'en';
        btn.innerHTML = `<i class="fas fa-check"></i> ${translations[currentLang].copiedSuccess}`;
        setTimeout(() => {
            btn.innerHTML = originalHTML;
        }, 2000);
    }

    // Function to populate dropdowns dynamically
    function populateDropdown(selectElement, options, selectedValue = null, defaultText) {
        selectElement.innerHTML = '';
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = defaultText;
        defaultOption.disabled = true;
        defaultOption.selected = true;
        selectElement.appendChild(defaultOption);

        options.forEach(option => {
            const opt = document.createElement('option');
            opt.value = option.value;
            opt.textContent = option.text;
            if (selectedValue && option.value === selectedValue) {
                opt.selected = true;
            }
            selectElement.appendChild(opt);
        });
    }

    // --- Core Data Loading (Corrected for your seo-data-{lang}.json deployment) ---
    async function loadSEOData(lang) {
        try {
            // This now consistently looks for seo-data-{lang}.json, as you confirmed it works.
            const response = await fetch(`seo-data-${lang}.json`);

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status} - Could not load seo-data-${lang}.json.`);
            }
            const data = await response.json();
            console.log("Loaded SEO data for:", lang, data);

            seoData = data; // Store the fetched data
            initializeContentUI(); // Initialize UI relevant to content data
        } catch (err) {
            const currentUILang = localStorage.getItem('ytseoUILang') || 'en';
            console.error("Error loading SEO JSON for language", lang, err);
            generatedTitle.value = translations[currentUILang].alertGenerateContent;
            generatedDescription.value = `Error: Could not load data for ${lang}. Please ensure 'seo-data-${lang}.json' exists and is correctly formatted.`;
            generatedTags.value = "";
            generatedHashtags.value = "";
            populateDropdown(nicheSelect, [], null, translations[currentUILang].noNichesAvailable);
            populateDropdown(keywordSelect, [], null, translations[currentUILang].noKeywordsAvailable);
            keywordSelect.disabled = true;
            variablesSection.style.display = 'none';
        }
    }

    // --- UI Initialization and Update for Content-related Elements ---
    function initializeContentUI() {
        const currentUILang = localStorage.getItem('ytseoUILang') || 'en';
        const nicheOptions = [];
        if (seoData.seo_templates) {
            const uniqueNiches = new Set();
            seoData.seo_templates.forEach(templateGroup => {
                if (templateGroup.keywords && templateGroup.keywords.length > 0) {
                    const primaryKeyword = templateGroup.keywords[0]; // Assuming first keyword is the niche
                    if (!uniqueNiches.has(primaryKeyword)) {
                        uniqueNiches.add(primaryKeyword);
                        nicheOptions.push({ value: primaryKeyword, text: formatNameForDisplay(primaryKeyword) });
                    }
                }
            });
        }
        populateDropdown(nicheSelect, nicheOptions, null, translations[currentUILang].selectNicheCategory);

        // Reset other elements
        populateDropdown(keywordSelect, [], null, translations[currentUILang].selectSpecificKeyword);
        keywordSelect.disabled = true;
        variablesSection.style.display = 'none';
        generatedTitle.value = '';
        generatedDescription.value = '';
        generatedTags.value = '';
        generatedHashtags.value = '';
        currentTemplate = null;
        inputTopic.value = ''; // Clear topic input as well
    }

    // Handles niche and keyword selection changes (Manual Generation Pathway)
    function handleManualSelectionChange() {
        // Clear AI topic input when manual selection is used
        inputTopic.value = '';
        const selectedNiche = nicheSelect.value;
        const keywordsForSelectedNiche = [];
        currentTemplate = null;

        const selectedTemplateGroup = seoData.seo_templates.find(group => group.keywords.includes(selectedNiche));

        if (selectedTemplateGroup) {
            // Populate keywords from the selected group
            selectedTemplateGroup.keywords.forEach(keyword => {
                keywordsForSelectedNiche.push({ value: keyword, text: keyword });
            });
            const currentUILang = localStorage.getItem('ytseoUILang') || 'en';
            populateDropdown(keywordSelect, keywordsForSelectedNiche, null, translations[currentUILang].selectSpecificKeyword);
            keywordSelect.disabled = false;
        } else {
            // Reset keyword dropdown if no niche selected
            const currentUILang = localStorage.getItem('ytseoUILang') || 'en';
            populateDropdown(keywordSelect, [], null, translations[currentUILang].selectSpecificKeyword);
            keywordSelect.disabled = true;
            variablesSection.style.display = 'none';
        }
        updateVariableInputs();
        generateContentFromManualSelection(); // Regenerate SEO after manual selection changes
    }

    // Updates variable input fields based on selected keyword
    function updateVariableInputs() {
        const selectedNiche = nicheSelect.value;
        const selectedKeyword = keywordSelect.value;

        variableInputs.innerHTML = '';
        variablesSection.style.display = 'none';
        currentTemplate = null;

        if (selectedNiche && selectedKeyword && seoData.seo_templates) {
            const selectedGroup = seoData.seo_templates.find(group => group.keywords.includes(selectedNiche));

            if (selectedGroup && selectedGroup.templates) {
                currentTemplate = selectedGroup.templates;

                if (currentTemplate.variables) {
                    variablesSection.style.display = 'block';
                    for (const varName in currentTemplate.variables) {
                        if (currentTemplate.variables.hasOwnProperty(varName)) {
                            const varValues = currentTemplate.variables[varName];
                            const div = document.createElement('div');
                            div.classList.add('variable-item');

                            const label = document.createElement('label');
                            label.textContent = `${formatNameForDisplay(varName)}:`;
                            label.htmlFor = `var-${varName}`;
                            div.appendChild(label);

                            const input = document.createElement('input');
                            input.type = 'text';
                            input.id = `var-${varName}`;
                            input.placeholder = varValues && varValues.length > 0 ? `e.g., ${varValues[0]}` : 'Enter value';
                            input.value = varValues && varValues.length > 0 ? varValues[Math.floor(Math.random() * varValues.length)] : '';
                            input.setAttribute('data-variable-name', varName);
                            input.addEventListener('input', generateContentFromManualSelection); // Update SEO on variable input change
                            div.appendChild(input);

                            variableInputs.appendChild(div);
                        }
                    }
                }
            }
        }
    }

    // --- Primary Generate SEO function (handles both AI and Manual pathways) ---
    async function generateSEO() {
        const topic = inputTopic.value.trim();
        const selectedNiche = nicheSelect.value;
        const selectedKeyword = keywordSelect.value;
        const currentUILang = localStorage.getItem('ytseoUILang') || 'en';

        // Validate input based on which path is active
        if (!topic && (!selectedNiche || !selectedKeyword)) {
            alert(translations[currentUILang].alertEnterTopic);
            return;
        }

        // Show loading state
        const originalBtnText = generateBtn.innerHTML;
        generateBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ${translations[currentUILang].generatingText}`;
        generateBtn.disabled = true;

        try {
            if (topic) {
                // AI Generation pathway
                await generateContentFromTopic();
            } else {
                // Manual Generation pathway
                await generateContentFromManualSelection();
            }
        } catch (error) {
            console.error("Generation error:", error);
            alert(translations[currentUILang].alertGenerateContent);
        } finally {
            generateBtn.innerHTML = originalBtnText;
            generateBtn.disabled = false;
        }
    }


    // --- AI Generation Logic (extracted from the main generateSEO) ---
    async function generateContentFromTopic() {
        const topic = inputTopic.value.trim();
        const contentLang = contentLangSelect.value;
        const videoType = videoTypeSelect.value; // 'long' or 'shorts'

        // Data should already be loaded if language was selected, but fetch again if needed.
        // This makes sure we have the latest data for the selected content language.
        if (Object.keys(seoData).length === 0 || contentLang !== seoData.currentLang) {
             await loadSEOData(contentLang); // Reload if content language changed or data not present
        }

        const { seo_templates, fallback } = seoData || { seo_templates: [], fallback: {} };
        const template = findBestTemplate(topic, seo_templates);
        const chosenTemplate = template || fallback;

        if (!chosenTemplate || (!chosenTemplate.title && !chosenTemplate.description && !chosenTemplate.tags)) {
            generatedTitle.value = "No suitable template or fallback found for this topic.";
            generatedDescription.value = "";
            generatedTags.value = "";
            generatedHashtags.value = "";
            return;
        }

        // Generate variables (topic is primary, language and type are standard)
        const variables = {
            topic: topic,
            language: contentLang,
            video_type: videoType,
            ...(chosenTemplate.variables || {}) // Include variables defined in the matched/fallback template
        };

        let titleTemplate = '';
        let descriptionTemplate = '';
        let tagsTemplate = '';

        // Determine correct template parts based on structure
        if (chosenTemplate.templates) { // For specific seo_templates entries (with 'shorts' / 'long' variations)
            titleTemplate = chosenTemplate.templates.title[videoType] || chosenTemplate.templates.title.long || '';
            descriptionTemplate = chosenTemplate.templates.description[videoType] || chosenTemplate.templates.description.long || '';
            tagsTemplate = Array.isArray(chosenTemplate.templates.tags) ? chosenTemplate.templates.tags.join(", ") : chosenTemplate.templates.tags || '';
        } else { // For fallback or simpler templates
            titleTemplate = chosenTemplate.title || '';
            descriptionTemplate = chosenTemplate.description || '';
            tagsTemplate = Array.isArray(chosenTemplate.tags) ? chosenTemplate.tags.join(", ") : chosenTemplate.tags || '';
        }

        generatedTitle.value = replacePlaceholders(titleTemplate, variables);
        generatedDescription.value = replacePlaceholders(descriptionTemplate, variables);

        const tagsRaw = replacePlaceholders(tagsTemplate, variables);
        generatedTags.value = tagsRaw;
        generatedHashtags.value = tagsRaw.split(",").map(t => `#${t.trim().replace(/\s+/g, '')}`).filter(tag => tag !== '#').join(" "); // Filter empty hashtags

        // Reset manual selection dropdowns and variables after AI generation
        const currentUILang = localStorage.getItem('ytseoUILang') || 'en';
        populateDropdown(nicheSelect, [], null, translations[currentUILang].selectNicheCategory);
        populateDropdown(keywordSelect, [], null, translations[currentUILang].selectSpecificKeyword);
        keywordSelect.disabled = true;
        variablesSection.style.display = 'none';
        currentTemplate = null;
    }

    // --- Manual Generation Logic (extracted from the main generateSEO) ---
    async function generateContentFromManualSelection() {
        const contentLang = contentLangSelect.value;
        const videoType = videoTypeSelect.value; // 'long' or 'shorts'

        // Data should already be loaded if language was selected, but fetch again if needed.
        if (Object.keys(seoData).length === 0 || contentLang !== seoData.currentLang) {
             await loadSEOData(contentLang); // Reload if content language changed or data not present
        }

        // Use currentTemplate which is set by updateVariableInputs based on niche/keyword
        let templateToUse = currentTemplate;

        // If no specific niche/keyword is selected, clear outputs for manual mode.
        if (!templateToUse || !nicheSelect.value || !keywordSelect.value) {
            generatedTitle.value = "";
            generatedDescription.value = "";
            generatedTags.value = "";
            generatedHashtags.value = "";
            return;
        }

        let finalTitle = "";
        let finalDescription = "";
        let finalTags = [];

        if (templateToUse) {
            if (templateToUse.title) {
                finalTitle = templateToUse.title[videoType] || templateToUse.title.long || '';
            }
            if (templateToUse.description) {
                finalDescription = templateToUse.description[videoType] || templateToUse.description.long || '';
            }
            finalTags = (templateToUse.tags && Array.isArray(templateToUse.tags)) ? [...templateToUse.tags] : [];

            const manualVariables = {};
            // Collect values from dynamically generated variable inputs
            const inputs = variableInputs.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                const varName = input.getAttribute('data-variable-name');
                manualVariables[varName] = input.value;
            });

            // Combine with standard variables for replacement
            const allVariables = {
                language: contentLang,
                video_type: videoType,
                ...manualVariables
            };

            finalTitle = replacePlaceholders(finalTitle, allVariables);
            finalDescription = replacePlaceholders(finalDescription, allVariables);
            finalTags = finalTags.map(tag => replacePlaceholders(tag, allVariables));
        }

        // Replace any remaining unpopulated placeholders with "..."
        const allPlaceholdersRegex = /{([^}]+)}/g;
        finalTitle = finalTitle.replace(allPlaceholdersRegex, '...');
        finalDescription = finalDescription.replace(allPlaceholdersRegex, '...');
        finalTags = finalTags.map(tag => tag.replace(allPlaceholdersRegex, '...'));

        generatedTitle.value = finalTitle;
        generatedDescription.value = finalDescription;
        generatedTags.value = finalTags.join(", ");
        generatedHashtags.value = finalTags.map(t => `#${t.trim().replace(/\s+/g, '')}`).filter(tag => tag !== '#').join(" ");
    }


    // NEW IMPROVED findBestTemplate function (for AI generation)
    function findBestTemplate(topic, templates) {
        const lowerTopic = topic.toLowerCase();
        const topicWords = new Set(lowerTopic.split(/\s+/).filter(word => word.length > 2)); // Get unique words from topic, ignore short ones

        let bestMatchTemplate = null;
        let maxMatchingScore = 0; // Use a score instead of just count

        if (!templates) return null;

        for (const template of templates) {
            let currentScore = 0;
            if (!template.keywords) continue;

            template.keywords.forEach(kw => {
                const lowerKw = kw.toLowerCase();
                if (lowerTopic.includes(lowerKw)) {
                    // Give higher score for exact phrase match
                    if (lowerTopic === lowerKw) {
                        currentScore += 100; // Very high score for exact match
                    } else if (lowerTopic.includes(lowerKw + ' ')) { // Word boundary check
                        currentScore += lowerKw.split(/\s+/).length * 10; // More weight for multi-word keywords
                    } else {
                        currentScore += lowerKw.split(/\s+/).length; // Basic score for partial include
                    }
                }
            });

            if (currentScore > maxMatchingScore) {
                maxMatchingScore = currentScore;
                bestMatchTemplate = template;
            }
        }
        return bestMatchTemplate;
    }

    // Replaces placeholders like {variableName} with values from the variables object
    function replacePlaceholders(text, variables) {
        if (!text) return "";
        return text.replace(/{(\w+)}/g, (_, key) => {
            const value = variables[key];
            if (Array.isArray(value)) {
                return value[Math.floor(Math.random() * value.length)];
            }
            return value !== undefined ? value : ""; // Return empty string if variable is not found
        });
    }

    // Reset Form (for UI elements and outputs)
    function resetFields() {
        const currentUILang = localStorage.getItem('ytseoUILang') || 'en';
        inputTopic.value = "";
        contentLangSelect.value = 'en'; // Reset content language to English
        videoTypeSelect.value = "long"; // Reset video type

        generatedTitle.value = "";
        generatedDescription.value = "";
        generatedHashtags.value = "";
        generatedTags.value = "";

        // Reset manual selection dropdowns and variable section
        populateDropdown(nicheSelect, [], null, translations[currentUILang].selectNicheCategory);
        populateDropdown(keywordSelect, [], null, translations[currentUILang].selectSpecificKeyword);
        keywordSelect.disabled = true;
        variablesSection.style.display = 'none';
        currentTemplate = null;

        // Reload data for the default English content language
        loadSEOData('en');
    }

    // Download as TXT
    function downloadTxt() {
        const title = generatedTitle.value;
        const desc = generatedDescription.value;
        const tags = generatedTags.value;
        const hashtags = generatedHashtags.value;
        const currentUILang = localStorage.getItem('ytseoUILang') || 'en';

        if (!title && !desc && !tags && !hashtags) {
            alert(translations[currentUILang].alertGenerateContent);
            return;
        }

        const content = `Title:\n${title}\n\nDescription:\n${desc}\n\nTags:\n${tags}\n\nHashtags:\n${hashtags}\n\nGenerated by YTSEO.ai`;
        const blob = new Blob([content], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "ytseo-ai-content.txt";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url); // Clean up
    }

    // Dark Mode Toggle
    function toggleDarkMode() {
        document.body.classList.toggle("dark");
        const btn = document.querySelector('[onclick="toggleDarkMode()"]');
        const currentLang = localStorage.getItem('ytseoUILang') || 'en';
        btn.innerHTML = document.body.classList.contains("dark") ? `<i class="fas fa-sun"></i> ${translations[currentLang].lightModeButton}` : `<i class="fas fa-moon"></i> ${translations[currentLang].darkModeButton}`;
        localStorage.setItem('ytseoDarkMode', document.body.classList.contains("dark"));
    }

    // --- Event Listeners ---
    uiLangSelect.addEventListener('change', changeUILanguage); // UI language change

    contentLangSelect.addEventListener('change', (event) => { // Content language change
        loadSEOData(event.target.value);
    });

    // Topic Input (AI Generation pathway)
    inputTopic.addEventListener('input', () => {
        // Clear manual selections if topic is being used
        nicheSelect.value = '';
        keywordSelect.value = '';
        variablesSection.style.display = 'none';
        currentTemplate = null;
        generateContentFromTopic(); // Automatically generate on topic input
    });

    // Manual Selection dropdowns
    nicheSelect.addEventListener('change', handleManualSelectionChange);
    keywordSelect.addEventListener('change', updateVariableInputs); // Update variables on keyword change

    // Video Type affects both AI and Manual generation
    videoTypeSelect.addEventListener('change', () => {
        if (inputTopic.value.trim() !== "") {
            generateContentFromTopic();
        } else {
            generateContentFromManualSelection();
        }
    });

    // Main Generate Button
    generateBtn.addEventListener('click', generateSEO);

    // Reset Button
    resetBtn.addEventListener('click', resetFields);

    // --- INITIALIZE ON LOAD ---
    document.addEventListener('DOMContentLoaded', async () => {
        // Apply UI language and dark mode first
        const savedUILang = localStorage.getItem('ytseoUILang') || 'en';
        document.getElementById('uiLang').value = savedUILang;
        applyTranslations(savedUILang);

        if (localStorage.getItem('ytseoDarkMode') === 'true') {
            document.body.classList.add('dark');
            const btn = document.querySelector('[onclick="toggleDarkMode()"]');
            const currentLang = localStorage.getItem('ytseoUILang') || 'en';
            if (btn) { // Ensure button exists before trying to update its content
                btn.innerHTML = `<i class="fas fa-sun"></i> ${translations[currentLang].lightModeButton}`;
            }
        }

        // Load content data for the default language (English, or saved content language if applicable)
        const savedContentLang = contentLangSelect.value || 'en';
        await loadSEOData(savedContentLang); // Load initial content data
    });
</script>
</body>
</html>
