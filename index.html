<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTSEO.ai - Smart SEO for YouTube Videos</title>
    <meta name="description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta name="keywords" content="YouTube SEO, video optimization, title generator, description generator, tag generator, YouTube tools, AI SEO, content creator tools, content creation, video marketing, get more views, YouTube growth">
    <meta name="author" content="YTSEO.ai">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.ytseo.ai/">
    <meta property="og:title" content="YTSEO.ai - Smart SEO for YouTube Videos">
    <meta property="og:description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta property="og:image" content="https://www.ytseo.ai/og-image.jpg"> <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.ytseo.ai/">
    <meta property="twitter:title" content="YTSEO.ai - Smart SEO for YouTube Videos">
    <meta property="twitter:description" content="Generate optimized YouTube titles, descriptions, and tags instantly. Boost your video's SEO with AI-powered suggestions.">
    <meta property="twitter:image" content="https://www.ytseo.ai/twitter-image.jpg"> <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>YTSEO.ai</h1>
            <p data-translate-key="tagline">Smart SEO. More Views. Less Hassle.</p>
            <div class="header-controls">
                <select id="uiLang" onchange="changeUILanguage()">
                    <option value="en" data-translate-key="englishOption">English</option>
                    <option value="hi" data-translate-key="hindiOption">Hindi</option>
                    <option value="ur" data-translate-key="urduOption">Urdu</option>
                    <option value="ru" data-translate-key="russianOption">Russian</option>
                    <option value="es" data-translate-key="spanishOption">Espa√±ol</option>
                    <option value="fr" data-translate-key="frenchOption">Fran√ßais</option>
                    <option value="de" data-translate-key="germanOption">Deutsch</option>
                </select>
                <button onclick="toggleDarkMode()" data-translate-key="darkModeButton">üåô Dark Mode</button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="input-section card">
            <div class="form-group">
                <label for="inputTopic" data-translate-key="videoTopicLabel"><i class="fas fa-pencil-alt"></i> Video Topic/Script</label>
                <textarea id="inputTopic" rows="4" placeholder="e.g. A story about a lion who learns humility..." data-translate-key="videoTopicPlaceholder"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="language" data-translate-key="contentLanguageLabel"><i class="fas fa-globe"></i> Content Language</label>
                    <select id="language">
                        <option value="en" data-translate-key="englishOption">English</option>
                        <option value="hi" data-translate-key="hindiOption">Hindi</option>
                        <option value="ur" data-translate-key="urduOption">Urdu</option>
                        <option value="ru" data-translate-key="russianOption">Russian</option>
                        <option value="es" data-translate-key="spanishOption">Espa√±ol</option>
                        <option value="fr" data-translate-key="frenchOption">Fran√ßais</option>
                        <option value="de" data-translate-key="germanOption">Deutsch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="type" data-translate-key="videoFormatLabel"><i class="fas fa-video"></i> Video Format</label>
                    <select id="type">
                        <option value="shorts" data-translate-key="shortVideoOption">Short Video</option>
                        <option value="long" data-translate-key="longVideoOption">Long Video</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="generateSEO()" data-translate-key="generateSEOButton"><i class="fas fa-bolt"></i> Generate SEO</button>
                <button class="btn btn-secondary" onclick="resetFields()" data-translate-key="resetButton"><i class="fas fa-redo-alt"></i> Reset</button>
            </div>
        </section>

        <section class="output-section card">
            <div class="output-group">
                <label for="titleBox" data-translate-key="titleLabel"><i class="fas fa-heading"></i> Title</label>
                <textarea id="titleBox" rows="2" placeholder="Your optimized title will appear here..." data-translate-key="titlePlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('titleBox')"><i class="fas fa-copy"></i> Copy Title</button>
            </div>

            <div class="output-group">
                <label for="descBox" data-translate-key="descriptionLabel"><i class="fas fa-align-left"></i> Description</label>
                <textarea id="descBox" rows="6" placeholder="Your SEO description will appear here..." data-translate-key="descriptionPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('descBox')"><i class="fas fa-copy"></i> Copy Description</button>
            </div>

            <div class="output-group">
                <label for="hashtagBox" data-translate-key="hashtagsLabel"><i class="fas fa-hashtag"></i> Hashtags</label>
                <textarea id="hashtagBox" rows="2" placeholder="Relevant hashtags will appear here..." data-translate-key="hashtagsPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('hashtagBox')"><i class="fas fa-copy"></i> Copy Hashtags</button>
            </div>

            <div class="output-group">
                <label for="tagsBox" data-translate-key="videoTagsLabel"><i class="fas fa-tags"></i> Video Tags</label>
                <textarea id="tagsBox" rows="3" placeholder="Optimized tags will appear here..." data-translate-key="videoTagsPlaceholder" readonly></textarea>
                <button class="btn-copy" onclick="copyToClipboard('tagsBox')"><i class="fas fa-copy"></i> Copy Tags</button>
            </div>

            <button class="btn btn-export" onclick="downloadTxt()" data-translate-key="exportButton"><i class="fas fa-download"></i> Export All</button>
        </section>
    </main>

    <footer>
        <div class="container">
            <p data-translate-key="footerText">Powered by <strong>YTSEO.ai</strong> ‚Äì Built with ‚ù§Ô∏è for global creators</p>
        </div>
    </footer>

    <script>
    const uiLangSelect = document.getElementById('uiLang');
    const topicInput = document.getElementById('topicInput');
    const nicheSelect = document.getElementById('nicheSelect');
    const keywordSelect = document.getElementById('keywordSelect');
    const videoTypeSelect = document.getElementById('videoTypeSelect');
    const variablesSection = document.getElementById('variablesSection');
    const variableInputs = document.getElementById('variableInputs');
    const generateBtn = document.getElementById('generateBtn');
    const resetBtn = document.getElementById('resetBtn');
    const generatedTitle = document.getElementById('generatedTitle');
    const generatedDescription = document.getElementById('generatedDescription');
    const generatedTags = document.getElementById('generatedTags');

    let seoData = {}; // This will hold the entire loaded JSON data for the current language
    let currentTemplate = null; // Stores the currently selected template object (the 'templates' object from JSON)

    // Helper to format names (niche or variable) for display
    function formatNameForDisplay(name) {
        return name.replace(/_/g, ' ').replace(/\b\w/g, char => char.toUpperCase());
    }

    // Helper to copy text to clipboard
    function copyToClipboard(elementId) {
        const element = document.getElementById(elementId);
        element.select();
        element.setSelectionRange(0, 99999);
        document.execCommand("copy");
        alert("Copied to clipboard!");
    }

    // Function to populate dropdowns dynamically
    function populateDropdown(selectElement, options, selectedValue = null, defaultText) {
        selectElement.innerHTML = '';
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = defaultText || `Select ${selectElement.id.replace('Select', '')}`;
        defaultOption.disabled = true;
        defaultOption.selected = true;
        selectElement.appendChild(defaultOption);

        options.forEach(option => {
            const opt = document.createElement('option');
            opt.value = option.value;
            opt.textContent = option.text;
            if (selectedValue && option.value === selectedValue) {
                opt.selected = true;
            }
            selectElement.appendChild(opt);
        });
    }

    // --- Core Data Loading (Simplified after file rename) ---
    async function loadSEOData(lang) {
        try {
            // This is now simpler because all files are seo-data-{lang}.json
            const response = await fetch(`seo-data-${lang}.json`);

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status} - Could not load seo-data-${lang}.json.`);
            }
            const data = await response.json();
            console.log("Loaded SEO data for:", lang, data);

            seoData = data; // Store the fetched data
            initializeUI(); // Re-initialize the UI with the new language data
        } catch (err) {
            console.error("Error loading SEO JSON for language", lang, err);
            generatedTitle.value = `Error: Could not load data for ${lang}.`;
            generatedDescription.value = `Please ensure 'seo-data-${lang}.json' exists and is correctly formatted.`;
            generatedTags.value = "";
            populateDropdown(nicheSelect, [], "No Niches Available");
            populateDropdown(keywordSelect, [], "No Keywords Available");
            keywordSelect.disabled = true;
            variablesSection.style.display = 'none';
        }
    }

    // --- UI Initialization and Update ---
    function initializeUI() {
        // Populate Niche Select (from keywords in seo_templates array)
        const nicheOptions = [];
        if (seoData.seo_templates) {
            const uniqueNiches = new Set();
            seoData.seo_templates.forEach(templateGroup => {
                if (templateGroup.keywords && templateGroup.keywords.length > 0) {
                    const primaryKeyword = templateGroup.keywords[0];
                    if (!uniqueNiches.has(primaryKeyword)) {
                        uniqueNiches.add(primaryKeyword);
                        nicheOptions.push({ value: primaryKeyword, text: formatNameForDisplay(primaryKeyword) });
                    }
                }
            });
        }
        populateDropdown(nicheSelect, nicheOptions, null, "Select Niche/Category");

        // Populate Video Type Selector
        populateDropdown(videoTypeSelect, [
            { value: 'long', text: 'Long Form Video' },
            { value: 'shorts', text: 'YouTube Shorts' }
        ], 'long', "Select Video Type"); // Default to 'long'

        // Reset keyword and variable sections
        populateDropdown(keywordSelect, [], "Select Keyword");
        keywordSelect.disabled = true;
        variablesSection.style.display = 'none';
        generatedTitle.value = '';
        generatedDescription.value = '';
        generatedTags.value = '';
        currentTemplate = null; // Clear currently selected template
        topicInput.value = ''; // Clear topic input on language change/reset
    }

    // Handles niche and keyword selection changes
    function handleSelectionChange() {
        // Clear topic input if manual dropdowns are being used
        topicInput.value = '';

        const selectedNiche = nicheSelect.value;
        const keywordsForSelectedNiche = [];
        currentTemplate = null; // Reset template on new selection

        const selectedTemplateGroup = seoData.seo_templates.find(group => group.keywords.includes(selectedNiche));

        if (selectedTemplateGroup) {
            selectedTemplateGroup.keywords.forEach(keyword => {
                keywordsForSelectedNiche.push({ value: keyword, text: keyword });
            });
            populateDropdown(keywordSelect, keywordsForSelectedNiche, null, "Select Specific Keyword");
            keywordSelect.disabled = false;
        } else {
            populateDropdown(keywordSelect, [], "Select Keyword");
            keywordSelect.disabled = true;
            variablesSection.style.display = 'none';
        }

        updateVariableInputs();
        generateSEO(); // Regenerate SEO after manual selection changes
    }

    // Updates variable input fields based on selected keyword
    function updateVariableInputs() {
        const selectedNiche = nicheSelect.value;
        const selectedKeyword = keywordSelect.value;

        variableInputs.innerHTML = '';
        variablesSection.style.display = 'none';
        currentTemplate = null; // Reset current template

        if (selectedNiche && selectedKeyword && seoData.seo_templates) {
            const selectedGroup = seoData.seo_templates.find(group => group.keywords.includes(selectedNiche));

            if (selectedGroup && selectedGroup.templates) {
                currentTemplate = selectedGroup.templates;

                if (currentTemplate.variables) {
                    variablesSection.style.display = 'block';
                    for (const varName in currentTemplate.variables) {
                        if (currentTemplate.variables.hasOwnProperty(varName)) {
                            const varValues = currentTemplate.variables[varName];
                            const div = document.createElement('div');
                            div.classList.add('variable-item');

                            const label = document.createElement('label');
                            label.textContent = `${formatNameForDisplay(varName)}:`;
                            label.htmlFor = `var-${varName}`;
                            div.appendChild(label);

                            const input = document.createElement('input');
                            input.type = 'text';
                            input.id = `var-${varName}`;
                            input.placeholder = varValues && varValues.length > 0 ? `e.g., ${varValues[0]}` : 'Enter value';
                            input.value = varValues && varValues.length > 0 ? varValues[Math.floor(Math.random() * varValues.length)] : '';
                            input.setAttribute('data-variable-name', varName);
                            input.addEventListener('input', generateSEO); // Update SEO on variable input change
                            div.appendChild(input);

                            variableInputs.appendChild(div);
                        }
                    }
                }
            }
        }
    }

    // --- Fake AI Generator Logic (triggered by topicInput or generate button if topic is present) ---
    function generateSEOFromTopic() {
        const topic = topicInput.value.trim(); // Keep original casing for topic substitution
        const videoType = videoTypeSelect.value;

        let templateToUse = null;

        if (topic && seoData.seo_templates) {
            const lowerCaseTopic = topic.toLowerCase();
            // Try to find a template group whose keywords include the topic
            for (const templateGroup of seoData.seo_templates) {
                if (templateGroup.keywords && templateGroup.keywords.some(kw => lowerCaseTopic.includes(kw.toLowerCase()))) {
                    templateToUse = templateGroup.templates;
                    break;
                }
            }
        }

        // If no matching template, use fallback
        templateToUse = templateToUse || seoData.fallback;

        // Ensure we have a valid template, or default to empty strings
        if (!templateToUse) {
            generatedTitle.value = "No template found for this topic or no fallback available.";
            generatedDescription.value = "";
            generatedTags.value = "";
            return;
        }

        let finalTitle = "";
        let finalDescription = "";
        let finalTags = [];

        // Get title and description based on videoType
        if (templateToUse.title) {
            finalTitle = templateToUse.title[videoType] || templateToUse.title.long || '';
        }
        if (templateToUse.description) {
            finalDescription = templateToUse.description[videoType] || templateToUse.description.long || '';
        }
        finalTags = (templateToUse.tags && Array.isArray(templateToUse.tags)) ? [...templateToUse.tags] : [];

        // Substitute variables from the matched/fallback template's own variables
        if (templateToUse.variables) {
            for (const varName in templateToUse.variables) {
                if (templateToUse.variables.hasOwnProperty(varName)) {
                    const varValues = templateToUse.variables[varName];
                    // Pick a random value from the variable list, or use the topic if it's the {topic} variable
                    let varValue = varValues && varValues.length > 0 ? varValues[Math.floor(Math.random() * varValues.length)] : '';
                    if (varName === 'topic') { // Special handling for {topic}, always use topic input if present
                         varValue = topic || '...'; // Use topic input, or placeholder if topic is empty
                    }

                    const placeholder = new RegExp(`{${varName}}`, 'g');
                    finalTitle = finalTitle.replace(placeholder, varValue);
                    finalDescription = finalDescription.replace(placeholder, varValue);
                    finalTags = finalTags.map(tag => tag.replace(placeholder, varValue));
                }
            }
        }

        // Replace any remaining unpopulated placeholders with "..."
        const allPlaceholdersRegex = /{([^}]+)}/g;
        finalTitle = finalTitle.replace(allPlaceholdersRegex, '...');
        finalDescription = finalDescription.replace(allPlaceholdersRegex, '...');
        finalTags = finalTags.map(tag => tag.replace(allPlaceholdersRegex, '...'));

        generatedTitle.value = finalTitle;
        generatedDescription.value = finalDescription;
        generatedTags.value = finalTags.join(", ");

        // Reset dropdowns and variable section as AI generation operates independently
        populateDropdown(nicheSelect, [], "Select Niche/Category");
        populateDropdown(keywordSelect, [], "Select Keyword");
        keywordSelect.disabled = true;
        variablesSection.style.display = 'none';
        currentTemplate = null; // Clear template state after AI generation
    }

    // --- Original Generate SEO (for manual dropdown selections) ---
    function generateSEO() {
        let finalTitle = "";
        let finalDescription = "";
        let finalTags = [];
        const videoType = videoTypeSelect.value;

        let templateToUse = currentTemplate; // Use the template selected via dropdowns

        // If no specific niche/keyword is selected, clear outputs for manual mode.
        if (!templateToUse || !nicheSelect.value || !keywordSelect.value) {
            generatedTitle.value = "";
            generatedDescription.value = "";
            generatedTags.value = "";
            return;
        }

        if (templateToUse) {
            if (templateToUse.title) {
                finalTitle = templateToUse.title[videoType] || templateToUse.title.long || '';
            }
            if (templateToUse.description) {
                finalDescription = templateToUse.description[videoType] || templateToUse.description.long || '';
            }
            finalTags = (templateToUse.tags && Array.isArray(templateToUse.tags)) ? [...templateToUse.tags] : [];

            const inputs = variableInputs.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                const varName = input.getAttribute('data-variable-name');
                const varValue = input.value;
                const placeholder = new RegExp(`{${varName}}`, 'g');

                finalTitle = finalTitle.replace(placeholder, varValue);
                finalDescription = finalDescription.replace(placeholder, varValue);
                finalTags = finalTags.map(tag => tag.replace(placeholder, varValue));
            });
        }

        const allPlaceholdersRegex = /{([^}]+)}/g;
        finalTitle = finalTitle.replace(allPlaceholdersRegex, '...');
        finalDescription = finalDescription.replace(allPlaceholdersRegex, '...');
        finalTags = finalTags.map(tag => tag.replace(allPlaceholdersRegex, '...'));

        generatedTitle.value = finalTitle;
        generatedDescription.value = finalDescription;
        generatedTags.value = finalTags.join(", ");
    }


    // Resets the form and reloads initial data
    function resetForm() {
        uiLangSelect.value = 'en'; // Reset language to default
        loadSEOData(uiLangSelect.value); // Reload data for 'en'
        // Ensure outputs are cleared immediately on reset
        generatedTitle.value = '';
        generatedDescription.value = '';
        generatedTags.value = '';
    }

    // --- Event Listeners ---
    uiLangSelect.addEventListener('change', (event) => {
        loadSEOData(event.target.value);
    });

    // Listen for input on the topic field to trigger AI generation
    topicInput.addEventListener('input', () => {
        // Clear manual selections if topic is being used
        nicheSelect.value = '';
        keywordSelect.value = '';
        variablesSection.style.display = 'none';
        currentTemplate = null;
        generateSEOFromTopic();
    });

    nicheSelect.addEventListener('change', handleSelectionChange);
    keywordSelect.addEventListener('change', updateVariableInputs);

    videoTypeSelect.addEventListener('change', () => {
        // Determine which generation method to use based on topic input state
        if (topicInput.value.trim() !== "") {
            generateSEOFromTopic();
        } else {
            generateSEO();
        }
    });

    // Generate button will prioritize AI generation if topic is present, otherwise manual
    generateBtn.addEventListener('click', () => {
        if (topicInput.value.trim() !== "") {
            generateSEOFromTopic();
        } else {
            generateSEO();
        }
    });

    resetBtn.addEventListener('click', resetForm);

    // Initial load when the DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
        loadSEOData(uiLangSelect.value || 'en');
    });
    </script>
</body>
</html>
