<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SEO Video Content Generator</title>

<style>
  /* RESET & BASIC */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.5;
    background-color: var(--bg);
    color: var(--fg);
    transition: background-color 0.3s, color 0.3s;
  }
  :root {
    --bg: #ffffff;
    --fg: #222222;
    --primary: #0078d7;
    --secondary: #555;
    --input-bg: #f5f5f5;
    --input-border: #ccc;
    --button-bg: var(--primary);
    --button-fg: #fff;
    --button-hover-bg: #005aab;
  }
  .dark {
    --bg: #121212;
    --fg: #e0e0e0;
    --primary: #0a84ff;
    --secondary: #bbb;
    --input-bg: #2a2a2a;
    --input-border: #555;
    --button-bg: var(--primary);
    --button-fg: #fff;
    --button-hover-bg: #0066dd;
  }

  /* LAYOUT */
  .container {
    max-width: 1000px;
    margin: auto;
    padding: 1rem 1rem 3rem;
  }

  h1 {
    text-align: center;
    margin-bottom:0.5rem;
    font-weight: 700;
  }
  h2 {
    font-weight: 700;
    margin: 1rem 0 0.25rem 0;
  }

  /* FLEX AND FORM GRID */
  .form-group {
    margin-bottom: 1rem;
    display: flex; flex-direction: column;
  }
  label {
    font-weight: 600;
    margin-bottom: 0.3rem;
  }
  select, textarea, input[type=text] {
    padding: 0.5rem;
    border-radius: 4px;
    background-color: var(--input-bg);
    border: 1px solid var(--input-border);
    color: var(--fg);
    font-size: 1rem;
    font-family: inherit;
    resize: vertical;
    transition: border-color 0.2s;
  }
  select:focus, textarea:focus, input[type=text]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 5px var(--primary);
    background-color: var(--input-bg);
  }

  textarea {
    min-height: 80px;
    max-height: 180px;
  }

  .inline-group {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .inline-group > .form-group {
    flex: 1 1 300px;
  }

  /* Buttons */
  button {
    padding: 0.5rem 1rem;
    background-color: var(--button-bg);
    color: var(--button-fg);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1rem;
    transition: background-color 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  button:hover:not(:disabled) {
    background-color: var(--button-hover-bg);
  }

  .copy-btn {
    font-size: 0.9rem;
    padding: 0.3rem 0.7rem;
    border-radius: 3px;
    user-select: none;
  }

  /* Output area */
  .output-group textarea {
    position: relative;
  }

  .output-container {
    position: relative;
  }

  .copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background-color: var(--primary);
    border-radius: 3px;
    font-size: 0.85rem;
    padding: 0.3rem 0.5rem;
    color: white;
    border: none;
    cursor: pointer;
  }
  .copy-btn:hover {
    background-color: var(--button-hover-bg);
  }

  /* Toggle Container */
  .toggles {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  .toggle-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Responsive */
  @media screen and (max-width: 700px) {
    .inline-group {
      flex-direction: column;
    }
  }

  /* Custom Variables container */
  #custom-variables-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
  }
  #custom-variables-container .form-group {
    flex: 1 1 200px;
  }

  /* Language select styling */
  select.language-selector {
    max-width: 180px;
  }

</style>
</head>
<body>
<div class="container" aria-label="SEO Video Content Generator Application">
  <h1 id="appTitle" tabindex="0">SEO Video Content Generator</h1>

  <div class="toggles" role="region" aria-label="Settings toggles">
    <div class="toggle-group">
      <label for="ui-language-select" id="label-ui-language">UI Language:</label>
      <select id="ui-language-select" aria-labelledby="label-ui-language" class="language-selector" >
        <option value="en" selected>English</option>
        <option value="hi">हिन्दी</option>
        <option value="ur">اردو</option>
        <option value="ru">Русский</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
      </select>
    </div>

    <div class="toggle-group">
      <label for="content-language-select" id="label-content-language">Content Language:</label>
      <select id="content-language-select" aria-labelledby="label-content-language" class="language-selector">
        <option value="en" selected>English</option>
        <option value="hi">हिन्दी</option>
        <option value="ur">اردو</option>
        <option value="ru">Русский</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
      </select>
    </div>

    <div class="toggle-group" role="group" aria-label="Color Mode Toggle">
      <label for="mode-toggle" id="label-mode-toggle">Dark Mode:</label>
      <input type="checkbox" id="mode-toggle" aria-labelledby="label-mode-toggle" />
    </div>
  </div>

  <section aria-label="Generation Modes" style="margin-top: 0.8rem; margin-bottom: 1.2rem;">
    <h2 id="generation-modes-title">Generation Modes</h2>

    <div class="form-group" role="radiogroup" aria-labelledby="generation-modes-title" id="mode-selection">
      <!-- Mode toggle radio buttons -->
      <label>
        <input type="radio" name="generation-mode" value="ai" checked />
        AI Generation (Enter Topic)
      </label>
      <label>
        <input type="radio" name="generation-mode" value="manual" />
        Manual Selection
      </label>
    </div>
  </section>

  <!-- AI pathway -->
  <section id="ai-section">
    <div class="form-group">
      <label for="input-topic" id="label-input-topic">Enter Video Topic:</label>
      <textarea id="input-topic" aria-labelledby="label-input-topic" placeholder="Type your video topic here..."></textarea>
    </div>
  </section>

  <!-- Manual Selection Pathway -->
  <section id="manual-section" hidden>
    <div class="inline-group">
      <div class="form-group">
        <label for="select-niche" id="label-select-niche">Select Niche / Category:</label>
        <select id="select-niche" aria-labelledby="label-select-niche" disabled>
          <option value="">-- Select Niche --</option>
        </select>
      </div>
      <div class="form-group">
        <label for="select-keyword" id="label-select-keyword">Select Keyword:</label>
        <select id="select-keyword" aria-labelledby="label-select-keyword" disabled>
          <option value="">-- Select Keyword --</option>
        </select>
      </div>
      <div class="form-group">
        <label for="select-video-format" id="label-select-video-format">Video Format:</label>
        <select id="select-video-format" aria-labelledby="label-select-video-format" >
          <option value="short">Short Video</option>
          <option value="long">Long Video</option>
        </select>
      </div>
    </div>

    <fieldset id="custom-variables-container" aria-live="polite" aria-label="Custom Variables Input Fields">
      <!-- Dynamically created input fields for custom variables will appear here -->
    </fieldset>
  </section>

  <hr />

  <!-- Outputs -->
  <section aria-label="Generated SEO Content" id="output-section">
    <h2>SEO Content Output</h2>

    <div class="form-group output-group">
      <label for="output-title" id="label-output-title">Title</label>
      <div class="output-container">
        <textarea id="output-title" aria-labelledby="label-output-title" readonly></textarea>
        <button class="copy-btn" aria-label="Copy Title to Clipboard" type="button" data-copy-target="output-title">Copy</button>
      </div>
    </div>

    <div class="form-group output-group">
      <label for="output-description" id="label-output-description">Description</label>
      <div class="output-container">
        <textarea id="output-description" aria-labelledby="label-output-description" readonly></textarea>
        <button class="copy-btn" aria-label="Copy Description to Clipboard" type="button" data-copy-target="output-description">Copy</button>
      </div>
    </div>

    <div class="form-group output-group">
      <label for="output-hashtags" id="label-output-hashtags">Hashtags</label>
      <div class="output-container">
        <textarea id="output-hashtags" aria-labelledby="label-output-hashtags" readonly></textarea>
        <button class="copy-btn" aria-label="Copy Hashtags to Clipboard" type="button" data-copy-target="output-hashtags">Copy</button>
      </div>
    </div>

    <div class="form-group output-group">
      <label for="output-video-tags" id="label-output-video-tags">Video Tags</label>
      <div class="output-container">
        <textarea id="output-video-tags" aria-labelledby="label-output-video-tags" readonly></textarea>
        <button class="copy-btn" aria-label="Copy Video Tags to Clipboard" type="button" data-copy-target="output-video-tags">Copy</button>
      </div>
    </div>
  </section>

  <hr />

  <div class="inline-group" style="justify-content: center; margin-top: 1rem; gap: 1.3rem;">
    <button id="btn-generate" aria-describedby="generation-modes-title">Generate SEO Content</button>
    <button id="btn-reset">Reset</button>
    <button id="btn-export" disabled>Export All (.txt)</button>
  </div>
</div>

<script>
(() => {
  'use strict';

  // Language translations for UI strings (minimal, for demo)
  // Add missing translations to extend.
  const translations = {
    en: {
      "SEO Video Content Generator": "SEO Video Content Generator",
      "UI Language:": "UI Language:",
      "Content Language:": "Content Language:",
      "Dark Mode:": "Dark Mode:",
      "Generation Modes": "Generation Modes",
      "AI Generation (Enter Topic)": "AI Generation (Enter Topic)",
      "Manual Selection": "Manual Selection",
      "Enter Video Topic:": "Enter Video Topic:",
      "Select Niche / Category:": "Select Niche / Category:",
      "Select Keyword:": "Select Keyword:",
      "Video Format:": "Video Format:",
      "Short Video": "Short Video",
      "Long Video": "Long Video",
      "SEO Content Output": "SEO Content Output",
      "Title": "Title",
      "Description": "Description",
      "Hashtags": "Hashtags",
      "Video Tags": "Video Tags",
      "Copy": "Copy",
      "Copy Title to Clipboard": "Copy Title to Clipboard",
      "Copy Description to Clipboard": "Copy Description to Clipboard",
      "Copy Hashtags to Clipboard": "Copy Hashtags to Clipboard",
      "Copy Video Tags to Clipboard": "Copy Video Tags to Clipboard",
      "Generate SEO Content": "Generate SEO Content",
      "Reset": "Reset",
      "Export All (.txt)": "Export All (.txt)",
      "-- Select Niche --": "-- Select Niche --",
      "-- Select Keyword --": "-- Select Keyword --",
      "Type your video topic here...": "Type your video topic here...",
    },
    hi: {
      "SEO Video Content Generator": "एसईओ वीडियो सामग्री जनरेटर",
      "UI Language:": "यूआई भाषा:",
      "Content Language:": "सामग्री भाषा:",
      "Dark Mode:": "डार्क मोड:",
      "Generation Modes": "जनरेशन मोड",
      "AI Generation (Enter Topic)": "एआई जनरेशन (टॉपिक दर्ज करें)",
      "Manual Selection": "मैनुअल चयन",
      "Enter Video Topic:": "वीडियो विषय दर्ज करें:",
      "Select Niche / Category:": "श्रेणी चुनें:",
      "Select Keyword:": "कीवर्ड चुनें:",
      "Video Format:": "वीडियो प्रारूप:",
      "Short Video": "छोटा वीडियो",
      "Long Video": "लंबा वीडियो",
      "SEO Content Output": "एसईओ सामग्री आउटपुट",
      "Title": "शीर्षक",
      "Description": "विवरण",
      "Hashtags": "हैशटैग",
      "Video Tags": "वीडियो टैग",
      "Copy": "कॉपी करें",
      "Copy Title to Clipboard": "शीर्षक क्लिपबोर्ड पर कॉपी करें",
      "Copy Description to Clipboard": "विवरण क्लिपबोर्ड पर कॉपी करें",
      "Copy Hashtags to Clipboard": "हैशटैग क्लिपबोर्ड पर कॉपी करें",
      "Copy Video Tags to Clipboard": "वीडियो टैग क्लिपबोर्ड पर कॉपी करें",
      "Generate SEO Content": "एसईओ सामग्री उत्पन्न करें",
      "Reset": "रीसेट करें",
      "Export All (.txt)": "सभी निर्यात करें (.txt)",
      "-- Select Niche --": "-- श्रेणी चुनें --",
      "-- Select Keyword --": "-- कीवर्ड चुनें --",
      "Type your video topic here...": "यहाँ वीडियो विषय टाइप करें...",
    },
    ur: {
      "SEO Video Content Generator": "ایس ای او ویڈیو مواد تیار کنندہ",
      "UI Language:": "یو آئی زبان:",
      "Content Language:": "مواد کی زبان:",
      "Dark Mode:": "ڈارک موڈ:",
      "Generation Modes": "جنریشن موڈز",
      "AI Generation (Enter Topic)": "اے آئی جنریشن (موضوع درج کریں)",
      "Manual Selection": "دستی انتخاب",
      "Enter Video Topic:": "ویڈیو موضوع درج کریں:",
      "Select Niche / Category:": "زمرہ منتخب کریں:",
      "Select Keyword:": "کلیدی لفظ منتخب کریں:",
      "Video Format:": "ویڈیو فارمیٹ:",
      "Short Video": "مختصر ویڈیو",
      "Long Video": "لمبا ویڈیو",
      "SEO Content Output": "ایس ای او مواد کی پیداوار",
      "Title": "عنوان",
      "Description": "تفصیل",
      "Hashtags": "ہیش ٹیگز",
      "Video Tags": "ویڈیو ٹیگز",
      "Copy": "کاپی کریں",
      "Copy Title to Clipboard": "عنوان کو کلپ بورڈ پر کاپی کریں",
      "Copy Description to Clipboard": "تفصیل کو کلپ بورڈ پر کاپی کریں",
      "Copy Hashtags to Clipboard": "ہیش ٹیگز کو کلپ بورڈ پر کاپی کریں",
      "Copy Video Tags to Clipboard": "ویڈیو ٹیگز کو کلپ بورڈ پر کاپی کریں",
      "Generate SEO Content": "ایس ای او مواد تیار کریں",
      "Reset": "ری سیٹ کریں",
      "Export All (.txt)": "سب برآمد کریں (.txt)",
      "-- Select Niche --": "-- زمرہ منتخب کریں --",
      "-- Select Keyword --": "-- کلیدی لفظ منتخب کریں --",
      "Type your video topic here...": "یہاں ویڈیو موضوع ٹائپ کریں...",
    },
    ru: {
      "SEO Video Content Generator": "Генератор SEO видео контента",
      "UI Language:": "Язык интерфейса:",
      "Content Language:": "Язык контента:",
      "Dark Mode:": "Темный режим:",
      "Generation Modes": "Режимы генерации",
      "AI Generation (Enter Topic)": "AI генерация (Введите тему)",
      "Manual Selection": "Ручной выбор",
      "Enter Video Topic:": "Введите тему видео:",
      "Select Niche / Category:": "Выберите нишу / категорию:",
      "Select Keyword:": "Выберите ключевое слово:",
      "Video Format:": "Формат видео:",
      "Short Video": "Короткое видео",
      "Long Video": "Длинное видео",
      "SEO Content Output": "Результат SEO контента",
      "Title": "Заголовок",
      "Description": "Описание",
      "Hashtags": "Хештеги",
      "Video Tags": "Теги видео",
      "Copy": "Копировать",
      "Copy Title to Clipboard": "Копировать заголовок",
      "Copy Description to Clipboard": "Копировать описание",
      "Copy Hashtags to Clipboard": "Копировать хештеги",
      "Copy Video Tags to Clipboard": "Копировать теги видео",
      "Generate SEO Content": "Сгенерировать SEO контент",
      "Reset": "Сбросить",
      "Export All (.txt)": "Экспортировать все (.txt)",
      "-- Select Niche --": "-- Выберите нишу --",
      "-- Select Keyword --": "-- Выберите ключевое слово --",
      "Type your video topic here...": "Введите тему видео...",
    },
    es: {
      "SEO Video Content Generator": "Generador de contenido SEO para videos",
      "UI Language:": "Idioma de la interfaz:",
      "Content Language:": "Idioma del contenido:",
      "Dark Mode:": "Modo oscuro:",
      "Generation Modes": "Modos de generación",
      "AI Generation (Enter Topic)": "Generación AI (Ingrese tema)",
      "Manual Selection": "Selección manual",
      "Enter Video Topic:": "Ingrese tema del video:",
      "Select Niche / Category:": "Seleccione nicho / categoría:",
      "Select Keyword:": "Seleccione palabra clave:",
      "Video Format:": "Formato de video:",
      "Short Video": "Video corto",
      "Long Video": "Video largo",
      "SEO Content Output": "Salida de contenido SEO",
      "Title": "Título",
      "Description": "Descripción",
      "Hashtags": "Hashtags",
      "Video Tags": "Etiquetas de video",
      "Copy": "Copiar",
      "Copy Title to Clipboard": "Copiar título",
      "Copy Description to Clipboard": "Copiar descripción",
      "Copy Hashtags to Clipboard": "Copiar hashtags",
      "Copy Video Tags to Clipboard": "Copiar etiquetas de video",
      "Generate SEO Content": "Generar contenido SEO",
      "Reset": "Restablecer",
      "Export All (.txt)": "Exportar todo (.txt)",
      "-- Select Niche --": "-- Seleccione nicho --",
      "-- Select Keyword --": "-- Seleccione palabra clave --",
      "Type your video topic here...": "Escriba aquí el tema del video...",
    },
    fr: {
      "SEO Video Content Generator": "Générateur de contenu SEO vidéo",
      "UI Language:": "Langue de l'interface:",
      "Content Language:": "Langue du contenu:",
      "Dark Mode:": "Mode sombre:",
      "Generation Modes": "Modes de génération",
      "AI Generation (Enter Topic)": "Génération IA (Saisir le sujet)",
      "Manual Selection": "Sélection manuelle",
      "Enter Video Topic:": "Saisir le sujet de la vidéo:",
      "Select Niche / Category:": "Sélectionner une niche / catégorie:",
      "Select Keyword:": "Sélectionner un mot-clé:",
      "Video Format:": "Format vidéo:",
      "Short Video": "Vidéo courte",
      "Long Video": "Vidéo longue",
      "SEO Content Output": "Sortie du contenu SEO",
      "Title": "Titre",
      "Description": "Description",
      "Hashtags": "Hashtags",
      "Video Tags": "Tags vidéo",
      "Copy": "Copier",
      "Copy Title to Clipboard": "Copier le titre",
      "Copy Description to Clipboard": "Copier la description",
      "Copy Hashtags to Clipboard": "Copier les hashtags",
      "Copy Video Tags to Clipboard": "Copier les tags vidéo",
      "Generate SEO Content": "Générer le contenu SEO",
      "Reset": "Réinitialiser",
      "Export All (.txt)": "Exporter tout (.txt)",
      "-- Select Niche --": "-- Sélectionner une niche --",
      "-- Select Keyword --": "-- Sélectionner un mot-clé --",
      "Type your video topic here...": "Tapez le sujet de la vidéo ici...",
    },
    de: {
      "SEO Video Content Generator": "SEO Video-Inhalt Generator",
      "UI Language:": "UI-Sprache:",
      "Content Language:": "Inhaltssprache:",
      "Dark Mode:": "Dunkelmodus:",
      "Generation Modes": "Generierungsmodi",
      "AI Generation (Enter Topic)": "KI-Generierung (Thema eingeben)",
      "Manual Selection": "Manuelle Auswahl",
      "Enter Video Topic:": "Video-Thema eingeben:",
      "Select Niche / Category:": "Nische / Kategorie auswählen:",
      "Select Keyword:": "Schlüsselwort auswählen:",
      "Video Format:": "Videoformat:",
      "Short Video": "Kurzes Video",
      "Long Video": "Langes Video",
      "SEO Content Output": "SEO-Inhalt Ausgabe",
      "Title": "Titel",
      "Description": "Beschreibung",
      "Hashtags": "Hashtags",
      "Video Tags": "Video-Tags",
      "Copy": "Kopieren",
      "Copy Title to Clipboard": "Titel in Zwischenablage kopieren",
      "Copy Description to Clipboard": "Beschreibung in Zwischenablage kopieren",
      "Copy Hashtags to Clipboard": "Hashtags in Zwischenablage kopieren",
      "Copy Video Tags to Clipboard": "Video-Tags in Zwischenablage kopieren",
      "Generate SEO Content": "SEO-Inhalt generieren",
      "Reset": "Zurücksetzen",
      "Export All (.txt)": "Alles exportieren (.txt)",
      "-- Select Niche --": "-- Nische auswählen --",
      "-- Select Keyword --": "-- Schlüsselwort auswählen --",
      "Type your video topic here...": "Hier Video-Thema eingeben...",
    },
  };

  // SEO data storage
  let seoData = {}; // loaded seo-data-[lang].json content

  // Current UI & Content language codes
  let currentUILang = 'en';
  let currentContentLang = 'en';

  // DOM references
  const container = document.querySelector('.container');
  const uiLanguageSelect = document.getElementById('ui-language-select');
  const contentLanguageSelect = document.getElementById('content-language-select');
  const modeToggle = document.getElementById('mode-toggle');
  const generationModeRadios = document.querySelectorAll('input[name="generation-mode"]');
  const aiSection = document.getElementById('ai-section');
  const manualSection = document.getElementById('manual-section');
  const inputTopic = document.getElementById('input-topic');
  const selectNiche = document.getElementById('select-niche');
  const selectKeyword = document.getElementById('select-keyword');
  const selectVideoFormat = document.getElementById('select-video-format');
  const customVariablesContainer = document.getElementById('custom-variables-container');
  const btnGenerate = document.getElementById('btn-generate');
  const btnReset = document.getElementById('btn-reset');
  const btnExport = document.getElementById('btn-export');

  const outputs = {
    title: document.getElementById('output-title'),
    description: document.getElementById('output-description'),
    hashtags: document.getElementById('output-hashtags'),
    videoTags: document.getElementById('output-video-tags'),
  };

  // Labels for translations on UI
  const translatableElements = [
    { elem: document.getElementById('appTitle'), key: "SEO Video Content Generator" },
    { elem: document.querySelector('label[for="ui-language-select"]'), key: "UI Language:" },
    { elem: document.querySelector('label[for="content-language-select"]'), key: "Content Language:" },
    { elem: document.querySelector('label[for="mode-toggle"]'), key: "Dark Mode:" },
    { elem: document.getElementById('generation-modes-title'), key: "Generation Modes" },
    { elem: document.querySelector('label[for="input-topic"]'), key: "Enter Video Topic:" },
    { elem: document.querySelector('label[for="select-niche"]'), key: "Select Niche / Category:" },
    { elem: document.querySelector('label[for="select-keyword"]'), key: "Select Keyword:" },
    { elem: document.querySelector('label[for="select-video-format"]'), key: "Video Format:" },
    { elem: document.getElementById('output-section').querySelector('h2'), key: "SEO Content Output" },
    { elem: document.querySelector('label[for="output-title"]'), key: "Title" },
    { elem: document.querySelector('label[for="output-description"]'), key: "Description" },
    { elem: document.querySelector('label[for="output-hashtags"]'), key: "Hashtags" },
    { elem: document.querySelector('label[for="output-video-tags"]'), key: "Video Tags" },
    { elem: btnGenerate, key: "Generate SEO Content" },
    { elem: btnReset, key: "Reset" },
    { elem: btnExport, key: "Export All (.txt)" },
  ];

  // Also translate radio labels and option texts dynamically (by class or attribute)
  // We'll handle them separately inside translateUI()

  // Helper: Translate UI texts
  function translateUI() {
    const t = translations[currentUILang] || translations['en'];
    translatableElements.forEach(({elem, key}) => {
      if (elem) elem.textContent = t[key] || key;
    });

    // Translate option texts for language selects (keep English for options value)
    const nichePlaceholder = t["-- Select Niche --"] || "-- Select Niche --";
    const keywordPlaceholder = t["-- Select Keyword --"] || "-- Select Keyword --";
    if (selectNiche) {
      const firstOption = selectNiche.querySelector('option[value=""]');
      if (firstOption) firstOption.textContent = nichePlaceholder;
    }
    if (selectKeyword) {
      const firstOption = selectKeyword.querySelector('option[value=""]');
      if (firstOption) firstOption.textContent = keywordPlaceholder;
    }

    // Translate radio labels for generation mode
    const radios = document.querySelectorAll('input[name="generation-mode"]');
    radios.forEach(radio => {
      if (radio.nextSibling && radio.nextSibling.nodeType === Node.TEXT_NODE) {
        // Remove old text node to keep consistent text
        radio.nextSibling.textContent = '';
      }
      let label = radio.parentElement;
      if (!label) return;
      label.querySelector('input');
      if (radio.value === 'ai') label.lastChild.textContent = t["AI Generation (Enter Topic)"] || "AI Generation (Enter Topic)";
      if (radio.value === 'manual') label.lastChild.textContent = t["Manual Selection"] || "Manual Selection";
    });

    // Translate options of Video Format
    if (selectVideoFormat) {
      for (let option of selectVideoFormat.options) {
        if (option.value === 'short') option.textContent = t["Short Video"] || "Short Video";
        else if (option.value === 'long') option.textContent = t["Long Video"] || "Long Video";
      }
    }

    // Translate placeholder of inputTopic
    if (inputTopic) {
      inputTopic.placeholder = t["Type your video topic here..."] || "Type your video topic here...";
    }

    // Translate copy buttons' aria-label
    document.querySelectorAll('.copy-btn').forEach(btn => {
      const targetId = btn.dataset.copyTarget;
      let labelKey = null;
      if (targetId === "output-title") labelKey = "Copy Title to Clipboard";
      else if (targetId === "output-description") labelKey = "Copy Description to Clipboard";
      else if (targetId === "output-hashtags") labelKey = "Copy Hashtags to Clipboard";
      else if (targetId === "output-video-tags") labelKey = "Copy Video Tags to Clipboard";
      if (labelKey) btn.setAttribute('aria-label', t[labelKey] || labelKey);
      btn.textContent = t["Copy"] || "Copy";
    });
  }

  // Toggle dark mode
  modeToggle.addEventListener('change', () => {
    if (modeToggle.checked) {
      document.body.classList.add('dark');
    } else {
      document.body.classList.remove('dark');
    }
  });

  // Generation mode toggle handling
  function setGenerationMode(mode) {
    if (mode === 'ai') {
      aiSection.hidden = false;
      manualSection.hidden = true;
      inputTopic.disabled = false;
      selectNiche.disabled = true;
      selectKeyword.disabled = true;
      selectVideoFormat.disabled = true;
      customVariablesContainer.innerHTML = '';
      btnExport.disabled = isAllOutputsEmpty();
    } else if (mode === 'manual') {
      aiSection.hidden = true;
      manualSection.hidden = false;
      inputTopic.disabled = true;
      selectNiche.disabled = false;
      selectKeyword.disabled = false;
      selectVideoFormat.disabled = false;
      btnExport.disabled = isAllOutputsEmpty();
    }
  }

  generationModeRadios.forEach(radio => {
    radio.addEventListener('change', () => {
      if (radio.checked) setGenerationMode(radio.value);
    });
  });

  setGenerationMode('ai'); // initial

  // Helper: Load SEO data json file for a given content language
  // Expect json file name pattern: seo-data-[lang].json
  // For demo, will create dummy data inline for en, hi, etc
  // This simulates loading via fetch in production.

  // Dummy SEO data sample (replace with fetching real .json files in production)
  const dummySeoData = {
    // English
    en: {
      niches: {
        "Technology": {
          keywords: {
            "Smartphone": {
              variables: ["Product_Name", "Service_Location"],
              templates: {
                short: {
                  title: "Buy {Product_Name} in {Service_Location} - Best Deals",
                  description: "Explore the latest {Product_Name} available now in {Service_Location}. Get the best prices and features!",
                  hashtags: "#smartphone #{Product_Name} #{Service_Location} #tech",
                  videoTags: "smartphone, {Product_Name}, {Service_Location}, technology"
                },
                long: {
                  title: "Detailed Review and Buying Guide for {Product_Name} in {Service_Location}",
                  description: "Get an in-depth review and buying guide for {Product_Name} in {Service_Location}. Learn about specifications, prices, and user feedback.",
                  hashtags: "#SmartphoneReview #{Product_Name}Guide {Service_Location} #gadgets",
                  videoTags: "smartphone review, buying guide, {Product_Name}, {Service_Location}"
                }
              }
            },
            "Laptop": {
              variables: ["Product_Name", "Service_Location"],
              templates: {
                short: {
                  title: "Best {Product_Name} Deals in {Service_Location}",
                  description: "Find unbeatable deals on {Product_Name} laptops in {Service_Location}. Performance meets affordability!",
                  hashtags: "#laptop #{Product_Name} #{Service_Location}",
                  videoTags: "laptop, {Product_Name}, {Service_Location}, deals"
                },
                long: {
                  title: "Comprehensive Review of {Product_Name} Laptops - {Service_Location} Edition",
                  description: "Explore everything about {Product_Name} laptops available in {Service_Location}. Specs, usability, and pricing covered.",
                  hashtags: "#LaptopReview #{Product_Name} {Service_Location} #computing",
                  videoTags: "laptop review, {Product_Name}, {Service_Location}, computing"
                }
              }
            }
          }
        },
        "Health": {
          keywords: {
            "Yoga": {
              variables: ["Service_Location"],
              templates: {
                short: {
                  title: "Yoga Classes Available in {Service_Location}",
                  description: "Join our yoga classes in {Service_Location} to improve your health and flexibility. Suitable for all levels!",
                  hashtags: "#yoga #{Service_Location} #health #fitness",
                  videoTags: "yoga, classes, {Service_Location}, health, fitness"
                },
                long: {
                  title: "Complete Yoga Practice and Training in {Service_Location}",
                  description: "Experience comprehensive yoga training sessions in {Service_Location}, designed to boost your physical and mental well-being.",
                  hashtags: "#YogaTraining #{Service_Location} #wellness",
                  videoTags: "yoga training, {Service_Location}, wellness"
                }
              }
            }
          }
        }
      }
    },

    // Hindi example: minimal
    hi: {
      niches: {
        "प्रौद्योगिकी": {
          keywords: {
            "स्मार्टफोन": {
              variables: ["Product_Name", "Service_Location"],
              templates: {
                short: {
                  title: "{Service_Location} में {Product_Name} खरीदें - सर्वोत्तम ऑफ़र",
                  description: "{Service_Location} में उपलब्ध नवीनतम {Product_Name} की जानकारी प्राप्त करें। बेस्ट प्राइस और फीचर्स के साथ!",
                  hashtags: "#स्मार्टफोन #{Product_Name} #{Service_Location} #तकनीक",
                  videoTags: "स्मार्टफोन, {Product_Name}, {Service_Location}, तकनीक"
                },
                long: {
                  title: "{Service_Location} में {Product_Name} के लिए विस्तृत समीक्षा और खरीद मार्गदर्शिका",
                  description: "{Service_Location} में {Product_Name} के लिए विवरणपूर्ण समीक्षा और खरीद मार्गदर्शिका। विवरण, कीमतें और उपयोगकर्ता प्रतिक्रिया जानें।",
                  hashtags: "#स्मार्टफोनसमीक्षा #{Product_Name}मार्गदर्शिका {Service_Location} #गैजेट्स",
                  videoTags: "स्मार्टफोन समीक्षा, खरीद मार्गदर्शिका, {Product_Name}, {Service_Location}"
                }
              }
            }
          }
        }
      }
    },

    // For other languages return minimal empty structure to avoid errors
    ur: {niches:{}},
    ru: {niches:{}},
    es: {niches:{}},
    fr: {niches:{}},
    de: {niches:{}},
  };

  // Load SEO data for current content language
  async function loadSeoData(lang) {
    // Simulated ajax fetching with dummy data object
    // In production: fetch(`seo-data-${lang}.json`).then...
    seoData = dummySeoData[lang] || { niches: {} };
    populateNicheDropdown();
  }

  // Populate niche dropdown from current seoData
  function populateNicheDropdown() {
    clearDropdown(selectNiche, true);
    clearDropdown(selectKeyword, true);
    clearCustomVariables();

    const niches = seoData.niches;
    if (!niches || Object.keys(niches).length === 0) {
      selectNiche.disabled = true;
      selectKeyword.disabled = true;
      return;
    }
    selectNiche.disabled = false;
    const t = translations[currentUILang] || translations['en'];
    // placeholder
    addOption(selectNiche, '', t["-- Select Niche --"] || "-- Select Niche --", true);

    Object.keys(niches).forEach(niche => {
      addOption(selectNiche, niche, niche);
    });
  }

  // Populate keyword dropdown based on selected niche
  function populateKeywordDropdown(niche) {
    clearDropdown(selectKeyword, true);
    clearCustomVariables();

    if (!niche || !seoData.niches[niche]) {
      selectKeyword.disabled = true;
      return;
    }
    const keywords = seoData.niches[niche].keywords || {};
    if (Object.keys(keywords).length === 0) {
      selectKeyword.disabled = true;
      return;
    }
    selectKeyword.disabled = false;
    const t = translations[currentUILang] || translations['en'];
    addOption(selectKeyword, '', t["-- Select Keyword --"] || "-- Select Keyword --", true);

    Object.keys(keywords).forEach(kword => {
      addOption(selectKeyword, kword, kword);
    });
  }

  // Add option helper
  function addOption(select, value, text, disabled = false) {
    const opt = document.createElement('option');
    opt.value = value;
    opt.textContent = text;
    if(disabled) opt.disabled = true;
    select.appendChild(opt);
  }

  // Clear dropdown options except the placeholder
  function clearDropdown(select, preserveFirst=false) {
    if (!select) return;
    if (preserveFirst) {
      while (select.options.length > 1) select.remove(1);
    } else {
      select.innerHTML = '';
    }
  }

  // Manage custom variables input fields based on selected keyword
  function populateCustomVariables(niche, keyword) {
    clearCustomVariables();

    if (!niche || !keyword) return;

    const nicheData = seoData.niches[niche];
    if (!nicheData) return;
    const keywordData = nicheData.keywords[keyword];
    if (!keywordData) return;

    const variables = keywordData.variables || [];
    if (!variables.length) return;

    variables.forEach(variableName => {
      const fg = document.createElement('div');
      fg.className = 'form-group';
      fg.setAttribute('role', 'group');
      fg.setAttribute('aria-label', variableName);

      const label = document.createElement('label');
      label.for = `custom-var-${variableName}`;
      label.textContent = `{${variableName}}`;
      fg.appendChild(label);

      const input = document.createElement('input');
      input.type = 'text';
      input.id = `custom-var-${variableName}`;
      input.name = variableName;
      input.placeholder = variableName;
      input.autocomplete = 'off';
      fg.appendChild(input);

      customVariablesContainer.appendChild(fg);
    });
  }
  // Clear custom variable inputs
  function clearCustomVariables() {
    customVariablesContainer.innerHTML = '';
  }

  // Validate if outputs are all empty (used for disabling Export button)
  function isAllOutputsEmpty() {
    return !outputs.title.value && !outputs.description.value &&
      !outputs.hashtags.value && !outputs.videoTags.value;
  }

  // Copy to clipboard logic
  function copyToClipboard(text) {
    if (!navigator.clipboard) {
      // Fallback if Clipboard API is not supported
      const textarea = document.createElement("textarea");
      textarea.value = text;
      textarea.style.position = "fixed"; // avoid scroll jump
      document.body.appendChild(textarea);
      textarea.focus();
      textarea.select();
      try {
        document.execCommand('copy');
        alert('Copied!');
      } catch (err) {
        alert('Failed to copy');
      }
      document.body.removeChild(textarea);
      return;
    }
    navigator.clipboard.writeText(text).then(() => {
      // Optionally highlight or notify success, here we'll use alert:
      // alert('Copied to clipboard!');
      // better to change button text transiently, but skipping for brevity
    }, () => {
      alert('Failed to copy');
    });
  }

  // Generate SEO content from manual pathway via template replacement
  function generateManually(niche, keyword, format, variableValues) {
    if (!niche || !keyword || !seoData.niches[niche]) {
      clearGeneratedOutputs();
      return;
    }
    const keywordData = seoData.niches[niche].keywords[keyword];
    if (!keywordData) {
      clearGeneratedOutputs();
      return;
    }
    const template = keywordData.templates && keywordData.templates[format];
    if (!template) {
      clearGeneratedOutputs();
      return;
    }

    // Replace variables in template texts using variableValues
    const replaceVars = (text) => {
      return text.replace(/\{(\w+)\}/g, (match, varName) => {
        return variableValues[varName] || `{${varName}}`;
      });
    };

    outputs.title.value = replaceVars(template.title);
    outputs.description.value = replaceVars(template.description);
    outputs.hashtags.value = replaceVars(template.hashtags);
    outputs.videoTags.value = replaceVars(template.videoTags);

    btnExport.disabled = isAllOutputsEmpty();
  }

  // Clear all outputs
  function clearGeneratedOutputs() {
    for(let key in outputs) {
      outputs[key].value = '';
    }
    btnExport.disabled = true;
  }

  // Clear all inputs and outputs
  function resetAll() {
    // Reset inputs
    inputTopic.value = '';
    selectNiche.value = '';
    clearDropdown(selectKeyword, true);
    selectKeyword.disabled = true;
    selectVideoFormat.value = 'short';
    clearCustomVariables();
    clearGeneratedOutputs();
    btnExport.disabled = true;
  }

  // Simulated AI generation function (frontend-ready)
  function simulateAIGeneration(topic) {
    // This is a dummy implementation just to demonstrate
    // Real integration would call an AI API/service

    const baseTitle = `AI Generated Video Title for: "${topic}"`;
    const baseDesc = `This description is generated by AI for the topic "${topic}". Customize or extend it as needed.`;
    const baseHash = `#AI #${topic.split(" ").join("")}`;
    const baseTags = `${topic.toLowerCase()}, ai, autogenerated`;

    outputs.title.value = baseTitle;
    outputs.description.value = baseDesc;
    outputs.hashtags.value = baseHash;
    outputs.videoTags.value = baseTags;

    btnExport.disabled = false;
  }

  // Event listeners for dropdowns and custom variable changes
  selectNiche.addEventListener('change', (e) => {
    const niche = e.target.value;
    populateKeywordDropdown(niche);
    clearGeneratedOutputs();
  });

  selectKeyword.addEventListener('change', (e) => {
    const niche = selectNiche.value;
    const keyword = e.target.value;
    populateCustomVariables(niche, keyword);
    clearGeneratedOutputs();
  });

  // Generate button behavior
  btnGenerate.addEventListener('click', () => {
    clearGeneratedOutputs();

    const mode = document.querySelector('input[name="generation-mode"]:checked').value;

    if (mode === 'ai') {
      const topic = inputTopic.value.trim();
      if (!topic) {
        alert('Please enter a video topic to generate content.');
        inputTopic.focus();
        return;
      }
      // Trigger AI generation (simulation)
      simulateAIGeneration(topic);
    } else if (mode === 'manual') {
      const niche = selectNiche.value;
      const keyword = selectKeyword.value;
      if (!niche) {
        alert('Please select a niche/category.');
        selectNiche.focus();
        return;
      }
      if (!keyword) {
        alert('Please select a keyword.');
        selectKeyword.focus();
        return;
      }

      // Gather custom variables values
      const variableInputs = customVariablesContainer.querySelectorAll('input');
      let variableValues = {};
      for(let input of variableInputs) {
        if (!input.value.trim()) {
          alert(`Please enter a value for variable {${input.name}}.`);
          input.focus();
          return;
        }
        variableValues[input.name] = input.value.trim();
      }

      const format = selectVideoFormat.value;

      generateManually(niche, keyword, format, variableValues);
    }
  });

  // Reset Button
  btnReset.addEventListener('click', () => {
    resetAll();
  });

  // Export all outputs to a single .txt file
  btnExport.addEventListener('click', () => {
    if (isAllOutputsEmpty()) {
      alert('No generated content to export.');
      return;
    }
    const contents = [
      "Title:",
      outputs.title.value,
      "",
      "Description:",
      outputs.description.value,
      "",
      "Hashtags:",
      outputs.hashtags.value,
      "",
      "Video Tags:",
      outputs.videoTags.value
    ].join('\n');

    const blob = new Blob([contents], {type: "text/plain;charset=utf-8"});
    const fileName = `seo_content_${currentContentLang}.txt`;

    if (window.navigator.msSaveOrOpenBlob) {
      // For IE & Edge
      window.navigator.msSaveOrOpenBlob(blob, fileName);
    } else {
      const a = document.createElement("a");
      const url = URL.createObjectURL(blob);
      a.href = url;
      a.download = fileName;
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 0);
    }
  });

  // Copy buttons functionality
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const targetId = btn.dataset.copyTarget;
      const targetElem = document.getElementById(targetId);
      if (targetElem && targetElem.value) {
        copyToClipboard(targetElem.value);
      }
    });
  });

  // Load SEO data when content language changes
  contentLanguageSelect.addEventListener('change', async e => {
    currentContentLang = e.target.value;
    resetAll();
    await loadSeoData(currentContentLang);
  });

  // Change UI language
  uiLanguageSelect.addEventListener('change', e => {
    currentUILang = e.target.value;
    translateUI();
  });

  // Initialize translations and SEO data on page load
  (async function init() {
    translateUI();
    await loadSeoData(currentContentLang);
    resetAll();
  })();

})();
</script>

</body>
</html>
